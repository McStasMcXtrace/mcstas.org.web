<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML><HEAD>
<TITLE>Curved_Monochromator</TITLE>
<LINK REV="made" HREF="mailto:kristian.nielsen@risoe.dk">
</HEAD>

<BODY>

<P ALIGN=CENTER>
 [ <A href="#id">Identification</A>
 | <A href="#desc">Description</A>
 | <A href="#ipar">Input parameters</A>
 | <A href="#opar">Output parameters</A>
 | <A href="#links">Links</A> ]
</P>

<H1>The <CODE>Curved_Monochromator</CODE> component</H1>

                                 by Kristian Nielsen and Peter Link
Double bent multiple crystal slabs with anisotropic gaussian mosaic.


<H2><A NAME=id></A>Identification</H2>

<UL>
  <LI> <B>Author:</B> Emmanuel Farhi</B>
  <LI> <B>Origin:</B> McStas 1.5/<a href="http://www.ill.fr">ILL</a></B>
  <LI> <B>Date:</B> Aug. 24th 2001</B>
  <LI> <B>Version:</B> 0.1 </B>
  <LI> <B>Modification history:</B> <UL>
    <LI>  EF, Aug. 24th 2001: From Mosaic_anisotropic and Mon_2foc
  </UL>
</UL>
<H2><A NAME=desc></A>Description</H2>

<PRE>
Double bent infinitely thin mosaic crystal, useful as a monochromator or
analyzer. which uses a small-mosaicity approximation as well
as the approximation vy^2 << vz^2 + vx^2, and taking into account higher 
order scattering. The mosaic is anisotropic gaussian, with different FWHMs
in the Y and Z directions. The scattering vector is perpendicular to the
surface. For an unrotated monochromator component, the crystal plane lies in
the y-z plane (ie. parallel to the beam). The component also works in
transmission.
When curvatures are set to 0, the monochromator is flat. 
The curvatures approximation for focusing to distance L, with
monochromator rotation angle A1 are:
  RM = fabs(yheight/NV*RAD2DEG/(2*L*sin(DEG2RAD*A1)));
  RH = fabs(zwidth/NH*RAD2DEG*sin(DEG2RAD*A1)/(2*L));

When you rotate the component by A1 = asin(Q/2/Ki)*RAD2DEG, do not forget to 
rotate the following components by A2=2*A1 (for 1st order) !

Example: Curved_Monochromator(zwidth=0.01, yheight=0.01, gap=0.0005, 
          NH=11, NV=11, mosaich=30.0, mosaicv=30.0, r0=0.7, Q=1.8734)

Example values for lattice parameters
PG       002 DM=3.355 AA (Highly Oriented Pyrolytic Graphite)
PG       004 DM=1.607 AA
Heusler  111 DM=3.362 AA (Cu2MnAl)
CoFe         DM=1.771 AA (Co0.92Fe0.08)
Ge       311 DM=1.714 AA
Si       111 DM=3.135 AA
Cu       111 DM=2.087 AA
Cu       002 DM=1.807 AA
Cu       220 DM=1.278 AA
Cu       111 DM=2.095 AA

</PRE>

<H2><A NAME=ipar></A>Input parameters</H2>
Parameters in <B>boldface</B> are required;
the others are optional.
<TABLE BORDER=1>
<TR><TH>Name</TH>  <TH>Unit</TH>  <TH>Description</TH> <TH>Default</TH></TR>
<TR> <TD>zwidth</TD>
     <TD>m</TD>
     <TD>horizontal width of an individual slab </TD>
<TD ALIGN=RIGHT>0.01</TD> </TR>
<TR> <TD>yheight</TD>
     <TD>m</TD>
     <TD>vertical height of an individual slab </TD>
<TD ALIGN=RIGHT>0.01</TD> </TR>
<TR> <TD>gap</TD>
     <TD>m</TD>
     <TD>typical gap  between adjacent slabs </TD>
<TD ALIGN=RIGHT>0.0005</TD> </TR>
<TR> <TD>NH</TD>
     <TD>columns</TD>
     <TD>number of slabs horizontal </TD>
<TD ALIGN=RIGHT>11</TD> </TR>
<TR> <TD>NV</TD>
     <TD>rows</TD>
     <TD>number of slabs vertical   </TD>
<TD ALIGN=RIGHT>11</TD> </TR>
<TR> <TD>mosaich</TD>
     <TD>arc minutes</TD>
     <TD>Horisontal mosaic FWHM </TD>
<TD ALIGN=RIGHT>30.0</TD> </TR>
<TR> <TD>mosaicv</TD>
     <TD>arc minutes</TD>
     <TD>Vertical mosaic FWHM </TD>
<TD ALIGN=RIGHT>30.0</TD> </TR>
<TR> <TD>r0</TD>
     <TD>1</TD>
     <TD>Maximum reflectivity </TD>
<TD ALIGN=RIGHT>0.7</TD> </TR>
<TR> <TD>Q</TD>
     <TD>AA-1</TD>
     <TD>Scattering vector </TD>
<TD ALIGN=RIGHT>1.8734</TD> </TR>
<TR> <TD>RV</TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>RH</TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>DM</TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>mosaic</TD>
     <TD>arc minutes</TD>
     <TD>sets mosaich=mosaicv </TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>width</TD>
     <TD>m</TD>
     <TD>total width of monochromator </TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>height</TD>
     <TD>m</TD>
     <TD>total height of monochromator </TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>ywidth</TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>0</TD> </TR>
</TABLE>


<H2><A NAME=opar></A>Output parameters</H2>
<TABLE BORDER=1>
<TR><TH>Name</TH>  <TH>Unit</TH>  <TH>Description</TH> <TH>Default</TH></TR>
<TR> <TD><B>mos_rms_y</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>mos_rms_z</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>mos_rms_max</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>mono_Q</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>SlabWidth</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>SlabHeight</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
</TABLE>


<H2><A NAME=links></A>Links</H2>

<UL>
  <LI> <A HREF="Curved_Monochromator.comp">Source code</A> for <CODE>Curved_Monochromator.comp</CODE>.
  <LI> <a href="http://neutron.risoe.dk/neutron-mc/arch/9903/msg00031.html">Additional note</a> from Peter Link.
<a href="Mosaic_anisotropic.html">Mosaic_anisotropic</a> by Kristian Nielsen
<a href="Mon_2foc.html">Mon_2foc</a> by Peter Link

</UL>
<HR>
<P ALIGN=CENTER>
 [ <A href="#id">Identification</A>
 | <A href="#desc">Description</A>
 | <A href="#ipar">Input parameters</A>
 | <A href="#opar">Output parameters</A>
 | <A href="#links">Links</A> ]
</P>

<ADDRESS>
Generated automatically by McDoc, Kristian Nielsen
&lt;<A HREF="mailto:kristian.nielsen@risoe.dk">kristian.nielsen@risoe.dk</A>&gt; /
Jul 22 2002
</ADDRESS>
</BODY></HTML>
