<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML><HEAD>
<TITLE>Source_gen</TITLE>
<LINK REV="made" HREF="mailto:kristian.nielsen@risoe.dk">
</HEAD>

<BODY>

<P ALIGN=CENTER>
 [ <A href="#id">Identification</A>
 | <A href="#desc">Description</A>
 | <A href="#ipar">Input parameters</A>
 | <A href="#opar">Output parameters</A>
 | <A href="#links">Links</A> ]
</P>

<H1>The <CODE>Source_gen</CODE> component</H1>

Circular/squared neutron source with flat or Maxwellian energy spectrum 
(possibly spatially gaussian)


<H2><A NAME=id></A>Identification</H2>

<UL>
  <LI> <B>Author:</B> Kristian Nielsen, Kim Lefmann and Emmanuel Farhi</B>
  <LI> <B>Origin:</B> McStas 1.5.1</B>
  <LI> <B>Date:</B> October 30, 1997</B>
  <LI> <B>Version:</B> 1.2 </B>
  <LI> <B>Modification history:</B> <UL>
    <LI>  EF, Aug 27, 2001 ; can use Energy/wavelength and I1
    <LI>  EF, Sep 18, 2001 ; corrected illumination bug. Add options
    <LI>  EF, Oct 30, 2001 ; minor changes. mccompcurname replaced
  </UL>
</UL>
<H2><A NAME=desc></A>Description</H2>

<PRE>
This routine is a neutron source (rectangular or circular), which aims at
a square target centered at the beam (in order to improve MC-acceptance
rate). The angular divergence is then given by the dimensions of the
target.
The neutron energy/wavelength is distributed between Emin=E0-dE and
Emax=E0+dE or Lmin=Lambda0-dLambda and Lmax=Lambda0+dLambda. The I1 may
be either arbitrary (I1=0), or specified in neutrons per steradian per
square cm per Angstrom. A Maxwellian spectra may be selected if you give
the source temperatures (up to 3). The source shape is defined by its radius,
or can alternatively be squared if you specify non-zero h and w parameters.
The beam is spatially uniform, but becomes gaussian if one of the source
dimensions (radius, h or w) is negative, or you set the gaussian flag.
Divergence profiles are triangular. The source may have a thickness.
For the Maxwellian spectra, the generated intensity is dPhi/dLambda (n/s/AA)
For flat spectra, the generated intensity is Phi (n/s).

Usage example:
  Source_gen(radius=0.1,Lambda0=2.36,dLambda=0.16, T1 = 20, T2 = 38, I1=1e13)
  Source_gen(h=0.1,w=0.1,Emin=1,Emax=3, I1=1e13, verbose=1, gaussian=1)

Some sources parameters:
PSI cold source T1=150.42 I1=3.67e11 T2=38.74 I2=3.64e11
                T3=14.84 I3=0.95e11
ILL VCS cold source T1=216.8 I1=1.24e+13 T2=33.9 I2=1.02e+13 
       (H1)         T3=16.7  I3=3.0423e+12
ILL HCS cold source T1=213.4 I1=1.47e+13 T2=83.1 I2=3.26e+12 
       (H5)         T3=26.5  I3=1.21e13
ILL Thermal tube    T1=683.7 I1=1.7278e+13 T2=257.7 I2=7.3823e+13
       (H12)        T3=6.71  I3=6.7125e+09
    

</PRE>

<H2><A NAME=ipar></A>Input parameters</H2>
Parameters in <B>boldface</B> are required;
the others are optional.
<TABLE BORDER=1>
<TR><TH>Name</TH>  <TH>Unit</TH>  <TH>Description</TH> <TH>Default</TH></TR>
<TR> <TD>radius</TD>
     <TD>m</TD>
     <TD>Radius of circle in (x,y,0) plane where neutrons
are generated. You may also use 'h' and 'w' for a square source
</TD>
<TD ALIGN=RIGHT>0.1</TD> </TR>
<TR> <TD>dist</TD>
     <TD>m</TD>
     <TD>Distance to target along z axis.
</TD>
<TD ALIGN=RIGHT>57.296</TD> </TR>
<TR> <TD>xw</TD>
     <TD>m</TD>
     <TD>Width(x) of target. If dist is not given, xw = horz. div  (deg)
</TD>
<TD ALIGN=RIGHT>2</TD> </TR>
<TR> <TD>yh</TD>
     <TD>m</TD>
     <TD>Height(y) of target. If dist is not given, yh = vert. div (deg)
</TD>
<TD ALIGN=RIGHT>2</TD> </TR>
<TR> <TD>E0</TD>
     <TD>meV</TD>
     <TD>Mean energy of neutrons. You may also use Lambda0.
</TD>
<TD ALIGN=RIGHT>14.68</TD> </TR>
<TR> <TD>dE</TD>
     <TD>meV</TD>
     <TD>Energy spread of neutrons (half width).
</TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>Lambda0</TD>
     <TD>AA</TD>
     <TD>Mean wavelength of neutrons.
</TD>
<TD ALIGN=RIGHT>2.36</TD> </TR>
<TR> <TD>dLambda</TD>
     <TD>AA</TD>
     <TD>Wavelength spread of neutrons (half width).
</TD>
<TD ALIGN=RIGHT>0.1627</TD> </TR>
<TR> <TD>I1</TD>
     <TD>1/(cm**2*st*AA)</TD>
     <TD>Source flux per solid angle, area and Angstrom
</TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>h</TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>w</TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>gaussian</TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>verbose</TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>T1</TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>Lmin</TD>
     <TD>meV</TD>
     <TD>Minimum wavelength of neutrons
</TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>Lmax</TD>
     <TD>meV</TD>
     <TD>Maximum wavelength of neutrons
</TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>Emin</TD>
     <TD>meV</TD>
     <TD>Minimum energy of neutrons
</TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>Emax</TD>
     <TD>meV</TD>
     <TD>Maximum energy of neutrons
</TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>T2</TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>I2</TD>
     <TD>1/(cm**2*st*AA)</TD>
     <TD>Second Maxwellian Source flux 
</TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>T3</TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>I3</TD>
     <TD>1/(cm**2*st*AA)</TD>
     <TD>Third Maxwellian Source flux 
</TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>length</TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>0</TD> </TR>
</TABLE>


<H2><A NAME=opar></A>Output parameters</H2>
<TABLE BORDER=1>
<TR><TH>Name</TH>  <TH>Unit</TH>  <TH>Description</TH> <TH>Default</TH></TR>
<TR> <TD><B>p_in</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>lambda0</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>lambda02</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>L2P</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>lambda_0</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>d_lambda</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>lambda0b</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>lambda02b</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>L2Pb</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>lambda0c</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>lambda02c</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>L2Pc</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
</TABLE>


<H2><A NAME=links></A>Links</H2>

<UL>
  <LI> <A HREF="Source_gen.comp">Source code</A> for <CODE>Source_gen.comp</CODE>.
</UL>
<HR>
<P ALIGN=CENTER>
 [ <A href="#id">Identification</A>
 | <A href="#desc">Description</A>
 | <A href="#ipar">Input parameters</A>
 | <A href="#opar">Output parameters</A>
 | <A href="#links">Links</A> ]
</P>

<ADDRESS>
Generated automatically by McDoc, Kristian Nielsen
&lt;<A HREF="mailto:kristian.nielsen@risoe.dk">kristian.nielsen@risoe.dk</A>&gt; /
Jul 22 2002
</ADDRESS>
</BODY></HTML>
