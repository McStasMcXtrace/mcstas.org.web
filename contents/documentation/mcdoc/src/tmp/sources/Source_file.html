<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML><HEAD>
<TITLE>Source_file</TITLE>
<LINK REV="made" HREF="mailto:kristian.nielsen@risoe.dk">
</HEAD>

<BODY>

<P ALIGN=CENTER>
 [ <A href="#id">Identification</A>
 | <A href="#desc">Description</A>
 | <A href="#ipar">Input parameters</A>
 | <A href="#opar">Output parameters</A>
 | <A href="#links">Links</A> ]
</P>

<H1>The <CODE>Source_file</CODE> component</H1>

Source that generates neutron events from an ascii/binary 'source' file.


<H2><A NAME=id></A>Identification</H2>

<UL>
  <LI> <B>Author:</B> <a href="mailto:farhi@ill.fr">E. Farhi</a></B>
  <LI> <B>Origin:</B> McStas 1.5//<a href="http://www.ill.fr">ILL</a></B>
  <LI> <B>Date:</B> Sep 28th, 2001</B>
  <LI> <B>Version:</B> 0.1</B>
</UL>
<H2><A NAME=desc></A>Description</H2>

<PRE>
This component reads neutron events store in a file, and send them into
the instrument. It thus replaces a Source component, using a previously
computed neutron set. 
The input file may be 
1-text column formatted with lines containing at least 11 values in the order:
      x y z vx vy vz t sx sy sz p
  Such files may be generated for instance by Monitor_nD with 
      Monitor_nD(options="list=10000 source")
2-Vitess files (binary files of Neutron structure records)
3-float binary files (with the 11 values 'x y z vx vy vz t sx sy sz p')
It is specially useful to generate a virtual source at a point that few
neutron reach. A long simulation will then only be performed once, to create
the 'source' file. Further simulations are much faster if they start from
this low flux position with the 'source' file.

EXAMPLE:
To create a 'source' file collecting all neutron states, use:
  COMPONENT MySourceCreator = Monitor_nD(
    filename = "MySource.list", options="list all source")
at the position where will be the Source_file.
The output file is text formatted with: [x y z vx vy vz t sx sy sz p] lines, 
and is about 90 bytes per neutron. A binary float format (half size) is 
obtained with Monitor_nD(options="list all source binary").
A Vitess file may be obtained from the 'Vitess_output' component or from a
Vitess simulation.
Then unactivate the component MySourceCreator (add 'unactivate' in options),
as well as your real source, and put the new instrument source:
  COMPONENT Source = Source_file(
    input="MySource.list")
at the relevant position 

</PRE>

<H2><A NAME=ipar></A>Input parameters</H2>
Parameters in <B>boldface</B> are required;
the others are optional.
<TABLE BORDER=1>
<TR><TH>Name</TH>  <TH>Unit</TH>  <TH>Description</TH> <TH>Default</TH></TR>
<TR> <TD>input</TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>0</TD> </TR>
<TR> <TD>repeat_count</TD>
     <TD>1</TD>
     <TD>Number of times the source must be generated.
0 unactivates the component
</TD>
<TD ALIGN=RIGHT>1</TD> </TR>
</TABLE>


<H2><A NAME=opar></A>Output parameters</H2>
<TABLE BORDER=1>
<TR><TH>Name</TH>  <TH>Unit</TH>  <TH>Description</TH> <TH>Default</TH></TR>
<TR> <TD><B>file</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>source</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>rep</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>pos</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
<TR> <TD><B>FileType</B></TD>
     <TD></TD> <TD></TD>
<TD ALIGN=RIGHT>&nbsp;</TD> </TR>
</TABLE>


<H2><A NAME=links></A>Links</H2>

<UL>
  <LI> <A HREF="Source_file.comp">Source code</A> for <CODE>Source_file.comp</CODE>.
</UL>
<HR>
<P ALIGN=CENTER>
 [ <A href="#id">Identification</A>
 | <A href="#desc">Description</A>
 | <A href="#ipar">Input parameters</A>
 | <A href="#opar">Output parameters</A>
 | <A href="#links">Links</A> ]
</P>

<ADDRESS>
Generated automatically by McDoc, Kristian Nielsen
&lt;<A HREF="mailto:kristian.nielsen@risoe.dk">kristian.nielsen@risoe.dk</A>&gt; /
Jul 22 2002
</ADDRESS>
</BODY></HTML>
