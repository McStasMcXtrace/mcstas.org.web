<P><strong><blink>This archive web page is obsolete!</blink></strong> 
<P>Please refer to the new <a href="/pipermail/neutron-mc">mailman<a> archive!


<!-- MHonArc v2.1.0 -->
<!--X-Subject: rounding errors? -->
<!--X-From: "Dr. Georg Artus" <Georg_Artus@Physik.TU&#45;Muenchen.DE> -->
<!--X-Date: Mon, 22 Feb 1999 17:12:30 +0000 -->
<!--X-Message-Id: 36D18FFE.5E8FF413@ph.tum.de -->
<!--X-ContentType: multipart/mixed -->
<!--X-Reference-Id: 01J7128DFQD68X83C1@risoe.dk -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<html>
<head>
<title>rounding errors?</title>
<link rev="made" href="mailto:Georg_Artus@Physik.TU-Muenchen.DE">
</head>
<body bgcolor="white">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<A HREF="msg00016.html">Date Prev</A>][<A HREF="msg00018.html">Date Next</A>]
<a href="index.html#00017">[Chronological]</a>
<a href="threads.html#00017">[Thread]</a>
<a href="/cgi-bin/wilma/neutron-mc">[Top]</a>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>rounding errors?</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><strong>To</strong>: <strong>Kristian Nielsen &lt;<A HREF="mailto:kristian.nielsen@risoe.dk">kristian.nielsen@risoe.dk</A>&gt;</strong></LI>
<LI><strong>Subject</strong>: <strong>rounding errors?</strong></LI>
<LI><strong>From</strong>: <strong>"Dr. Georg Artus" &lt;<A HREF="mailto:Georg_Artus@Physik.TU-Muenchen.DE">Georg_Artus@Physik.TU-Muenchen.DE</A>&gt;</strong></LI>
<LI>Date: Mon, 22 Feb 1999 17:12:30 +0000</LI>
<LI>Organization: TUM</LI>
<LI>References: &lt;01J7128DFQD68X83C1@risoe.dk&gt;</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
Hello Kristian,

today I encountered some results I don't understand. I wanted to examine
deltalambda/lambda at the sample and for tracing reasons I set energy
detectors right before the monochromator, right after the monochromator
and at the sample position. If you plot the curves of all energy
detectors into one diagram the curve for the first detector looks ok. It
is just an even distribution (without guide). The one at the sample
gives you a gaussian like peak, looks ok also. For the energy detector
right after the monochromator I would have expected a gaussian like
curve with the maximum at the desired wavelength but with higher
intensity as the oone at the sample. But the maximum is shifted to
longer wavelengths (about 3%)! I've tried several configurations and it
is always the same. 
The attached example shows the effect. Q, theta and lambda should match.
How many decimals do you recommend for these values? Is it a rounding
error or a stupid error or something else?

Georg 

-- 
*********************************************

Dr. Georg Artus
Technische Universitaet Muenchen
Neue Forschungsneutronenquelle Garching
D-85747 Garching

Tel: +49 (0)89/289-14675
Fax: +49 (0)89/289-14666 or 12112
E-mail: gartus@ph.tum.de

</PRE>
<PRE>
DEFINE INSTRUMENT RESI()

TRACE

COMPONENT arm = Arm()
  AT (0,0,0) ABSOLUTE

COMPONENT source = Source_flat(
        radius = 0.1,
        dist = 5.0,
        xw = 0.04, yh = 0.09,
        E0 = 81.0425,   /* 1AA */
        dE = 8.2215)    /* delta lambda / lambda = 0.1 */
/*        dE = 0.8181)     delta lambda / lambda = 0.01 */
  AT (0,0,0) RELATIVE arm

COMPONENT enbemon = E_monitor(
        xmin = -0.03,
        xmax =  0.03,
        ymin = -0.05,
        ymax =  0.05,
        Emin = 72.821,
        Emax = 89.264,
        nchan = 10,
        filename = "enbemon.out")
  AT (0,0,4.84) RELATIVE arm

COMPONENT arm45m = Arm()
  AT (0,0,5) RELATIVE arm ROTATED (0,45,0) RELATIVE arm

COMPONENT arm90m = Arm()
  AT (0,0,5) RELATIVE arm ROTATED (0,90,0) RELATIVE arm

COMPONENT mono = Monochromator(
        zmin = -0.03,
        zmax = 0.03,
        ymin = -0.05,
        ymax = 0.05,
        mosaich = 10,
        mosaicv = 10,
        r0 = 0.5,
        Q = 8.88577)  /* 45° at 1AA */
  AT (0,0,0) RELATIVE arm45m

COMPONENT enafmon = E_monitor(
        xmin = -0.04,
        xmax =  0.04,
        ymin = -0.06,
        ymax =  0.06,
        Emin = 72.821,
        Emax = 89.264,
        nchan = 10,
        filename = "enafmon.out")
  AT (0,0,0.1) RELATIVE arm90m

COMPONENT ensample = E_monitor(
        xmin = -0.005,
        xmax =  0.005,
        ymin = -0.005,
        ymax =  0.005,
        Emin = 72.821,
        Emax = 89.264,
        nchan = 10,
        filename = "ensample.out")
  AT (0,0,2.0) RELATIVE arm90m

COMPONENT psdsamar = PSD_monitor(
        xmin = -0.03,
        xmax = 0.03,
        ymin = -0.07,
        ymax = 0.07,
        nx = 30,
        ny = 70,
        filename = "psdsamar.out")
  AT (0,0,2.0) RELATIVE arm90m

END

</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00018" HREF="msg00018.html">Re: rounding errors?</A></STRONG>
<UL><LI><EM>From:</EM> Kristian Nielsen &lt;kristian.nielsen@risoe.dk&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<LI>Prev by Date:
<STRONG><A HREF="msg00016.html">Re: Mcstas example programs</A></STRONG>
</LI>

<LI>Next by Date:
<STRONG><A HREF="msg00018.html">Re: rounding errors?</A></STRONG>
</LI>

<li>Index(es):
<ul>
<li><a href="index.html#00017"><strong>Chronological</Strong></a></li>
<li><a href="threads.html#00017"><strong>Thread</strong></a></li>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
