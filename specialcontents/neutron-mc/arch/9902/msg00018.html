<P><strong><blink>This archive web page is obsolete!</blink></strong> 
<P>Please refer to the new <a href="/pipermail/neutron-mc">mailman<a> archive!


<!-- MHonArc v2.1.0 -->
<!--X-Subject: Re: rounding errors? -->
<!--X-From: Kristian Nielsen <kristian.nielsen@risoe.dk> -->
<!--X-Date: 23 Feb 1999 08:53:20 +0100 -->
<!--X-Message-Id:  -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 36D18FFE.5E8FF413@ph.tum.de -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: rounding errors?</title>
<link rev="made" href="mailto:kristian.nielsen@risoe.dk">
</head>
<body bgcolor="white">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<A HREF="msg00017.html">Date Prev</A>][<A HREF="msg00019.html">Date Next</A>]
<a href="index.html#00018">[Chronological]</a>
<a href="threads.html#00018">[Thread]</a>
<a href="/cgi-bin/wilma/neutron-mc">[Top]</a>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>Re: rounding errors?</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><strong>To</strong>: <strong><A HREF="mailto:Georg_Artus@Physik.TU-Muenchen.DE">Georg_Artus@Physik.TU-Muenchen.DE</A></strong></LI>
<LI><strong>Subject</strong>: <strong>Re: rounding errors?</strong></LI>
<LI><strong>From</strong>: <strong>Kristian Nielsen &lt;<A HREF="mailto:kristian.nielsen@risoe.dk">kristian.nielsen@risoe.dk</A>&gt;</strong></LI>
<LI>Date: 23 Feb 1999 08:53:20 +0100</LI>
<LI>In-reply-to: &lt;<A HREF="msg00017.html">36D18FFE.5E8FF413@ph.tum.de</A>&gt; (Georg_Artus@Physik.TU-Muenchen.DE)</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
Hi Georg,

&gt; today I encountered some results I don't understand. I wanted to examine
&gt; deltalambda/lambda at the sample and for tracing reasons I set energy
&gt; detectors right before the monochromator, right after the monochromator
&gt; and at the sample position. If you plot the curves of all energy
&gt; detectors into one diagram the curve for the first detector looks ok. It
&gt; is just an even distribution (without guide). The one at the sample
&gt; gives you a gaussian like peak, looks ok also. For the energy detector
&gt; right after the monochromator I would have expected a gaussian like
&gt; curve with the maximum at the desired wavelength but with higher
&gt; intensity as the oone at the sample. But the maximum is shifted to
&gt; longer wavelengths (about 3%)! I've tried several configurations and it
&gt; is always the same.
&gt; The attached example shows the effect. Q, theta and lambda should match.
&gt; How many decimals do you recommend for these values? Is it a rounding
&gt; error or a stupid error or something else?

Hm, I tried your example, and the results look ok to me.

You set the Q value for the monochromator to 8.88577. At 45 degrees I
calculate this to correspond to 81.8 meV, and both plots are nicely
centered around this value. Did you calculate another energy for this Q?
Then perhaps either the constants for unit conversion in McStas are
wrong, or you made an error?

The spectrum in the energy monitor after the monochromator is not
symmetric, as is to be expected; the monochromator scatters symetrically
in Q space, which is not symmetric in energy space.

I have put a plot of the four detectors on the web page, at

    <A HREF="http://neutron.risoe.dk/mcstas/support/artus/resi-plot.gif">http://neutron.risoe.dk/mcstas/support/artus/resi-plot.gif</A>

Take a look and see if it looks similar to your results. This also gives
you a preview of what the next version of McStas will provide. This plot
is produced automatically by running an 'mcplot' front-end after the
simulation. Clicking the mouse produces a full-screen version of the
plot under the cursor.

 - Kristian.




</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00017" HREF="msg00017.html">rounding errors?</A></STRONG>
<UL><LI><EM>From:</EM> "Dr. Georg Artus" &lt;Georg_Artus@Physik.TU-Muenchen.DE&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<LI>Prev by Date:
<STRONG><A HREF="msg00017.html">rounding errors?</A></STRONG>
</LI>

<LI>Next by Date:
<STRONG><A HREF="msg00019.html">Re: rounding errors?</A></STRONG>
</LI>

<li>Index(es):
<ul>
<li><a href="index.html#00018"><strong>Chronological</Strong></a></li>
<li><a href="threads.html#00018"><strong>Thread</strong></a></li>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
