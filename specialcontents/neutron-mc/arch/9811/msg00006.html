<P><strong><blink>This archive web page is obsolete!</blink></strong> 
<P>Please refer to the new <a href="/pipermail/neutron-mc">mailman<a> archive!


<!-- MHonArc v2.1.0 -->
<!--X-Subject: Re: MCStas -->
<!--X-From: Kristian Nielsen <kristian.nielsen@risoe.dk> -->
<!--X-Date: Tue, 10 Nov 1998 13:20:27 +0100 -->
<!--X-Message-Id: 01J48MDVMEAO8WWAUI@risoe.dk -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 3647DF23.2326806C@ccbsf0.kek.jp -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: MCStas</title>
<link rev="made" href="mailto:kristian.nielsen@risoe.dk">
</head>
<body bgcolor="white">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<A HREF="msg00005.html">Date Prev</A>][<A HREF="msg00013.html">Date Next</A>]
<a href="index.html#00006">[Chronological]</a>
<a href="threads.html#00006">[Thread]</a>
<a href="/cgi-bin/wilma/neutron-mc">[Top]</a>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>Re: MCStas</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><strong>To</strong>: <strong><A HREF="mailto:agarrett@ccbsf0.kek.jp">agarrett@ccbsf0.kek.jp</A></strong></LI>
<LI><strong>Subject</strong>: <strong>Re: MCStas</strong></LI>
<LI><strong>From</strong>: <strong>Kristian Nielsen &lt;<A HREF="mailto:kristian.nielsen@risoe.dk">kristian.nielsen@risoe.dk</A>&gt;</strong></LI>
<LI>Date: Tue, 10 Nov 1998 13:20:27 +0100</LI>
<LI>In-reply-to: &lt;3647DF23.2326806C@ccbsf0.kek.jp&gt;(message from Andrew Garrett on Tue, 10 Nov 1998 15:37:23 +0900)</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
&gt; Kristian,
&gt; 
&gt;   As we'd discussed during the conference, I've been trying to get
&gt; MCStas running under windows.  I'm having a problem...
&gt; 
&gt;   The problem occurs in the yyparse function in instrume.c.  This is the
&gt; bison parser, and I'm having some trouble isolating the problem.  My
&gt; best guess at the moment is all the
&gt;     #line x "/usr/share/misc/bison.simple"
&gt; since that file doesn't actually exist on my machine (OK, it's not the
&gt; most difficult guess in the world).  Do you know what that file is?  Or
&gt; where I can find a copy, preferably windows compatible?

This file is not related to your problem. The #line bit just tells your
C compiler that the following code was copied from a file of that name,
so that error messages can refer to the original file. You can safely
delete all the #line's, but that is unlikely to make any difference.

You do not give much information, perhaps you could send me the exact
error message of the compiler (and perhaps also information on what
compiler you are using)?

As far as I know, with Microsoft visual C two problems occur, both in
the linker phase. One is a missing strcasecmp() function and one is a
missing alloca() function. I believe you can solve this by replacing
strcasecmp() with stricmp() (or plain strcmp() if stricmp also does not
work); and by having the compiler define the preprocessor symbol MSDOS
(or put the line '#define MSDOS 1' in mcstas.h).

&gt;   As to other changes that have been required, most have revolved around
&gt; the file system, changing the separator '/' to '\'.  Also, I had to

Yes.

&gt; declare the variable read_components in mcstas.h as extern, or I got an
&gt; error for this being declared in every file.  I'm not sure if that will
&gt; cause problems down the road - was that defined anywhere else?

Yes, this is a bug! I have fixed it in my source, it wil be in the next version.

&gt;   Thanks for your help,

You are welcome. Let me know what you find; once we get it working you
should send me your changes so that the next version of McStas works
with Windows.

 - Kristian.




</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<LI>Prev by Date:
<STRONG><A HREF="msg00005.html">MCStas</A></STRONG>
</LI>

<LI>Next by Date:
<STRONG><A HREF="msg00013.html">Re: First tries using McStas</A></STRONG>
</LI>

<li>Index(es):
<ul>
<li><a href="index.html#00006"><strong>Chronological</Strong></a></li>
<li><a href="threads.html#00006"><strong>Thread</strong></a></li>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
