<P><strong><blink>This archive web page is obsolete!</blink></strong> 
<P>Please refer to the new <a href="/pipermail/neutron-mc">mailman<a> archive!


<!-- MHonArc v2.1.0 -->
<!--X-Subject: Re: compile problem with mcstas&#45;1.5 -->
<!--X-From: Per&#45;Olof =?iso&#45;8859&#45;1?Q?=C5strand?= <per&#45;olof.aastrand@risoe.dk> -->
<!--X-Date: Thu, 25 Oct 2001 14:56:25 +0200 -->
<!--X-Message-Id: 3BD80BF8.7962429@risoe.dk -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 3BD40AC2.A5418613@dxray.mpi&#45;stuttgart.mpg.de -->
<!--X-Reference-Id: 3BD4116F.8EBAFD3D@ill.fr -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: compile problem with mcstas-1.5</title>
<link rev="made" href="mailto:per-olof.aastrand@risoe.dk">
</head>
<body bgcolor="white">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<A HREF="msg00008.html">Date Prev</A>][<A HREF="msg00010.html">Date Next</A>]
<a href="index.html#00009">[Chronological]</a>
<a href="threads.html#00009">[Thread]</a>
<a href="/cgi-bin/wilma/neutron-mc">[Top]</a>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>Re: compile problem with mcstas-1.5</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><strong>To</strong>: <strong>neutron-mc &lt;<A HREF="mailto:neutron-mc@risoe.dk">neutron-mc@risoe.dk</A>&gt;</strong></LI>
<LI><strong>Subject</strong>: <strong>Re: compile problem with mcstas-1.5</strong></LI>
<LI><strong>From</strong>: <strong>Per-Olof &Aring;strand &lt;<A HREF="mailto:per-olof.aastrand@risoe.dk">per-olof.aastrand@risoe.dk</A>&gt;</strong></LI>
<LI>Date: Thu, 25 Oct 2001 14:56:25 +0200</LI>
<LI>References: &lt;<A HREF="msg00007.html">3BD40AC2.A5418613@dxray.mpi-stuttgart.mpg.de</A>&gt;&lt;<A HREF="msg00008.html">3BD4116F.8EBAFD3D@ill.fr</A>&gt;</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
Dear Ulrich,

I would assume that the Flux_adapter component causes the problem. It is
not in the official release of McStas. I don't have it so I guess you
have to turn to the author of the component to get it corrected.

There are no bugs preventing McStas 1.5 from working. The first release
file I put on the web was unfortunately a mess, but one couldn't compile
_any_ of the instruments. Fortunately, it was pointed out by Garrett
Granroth at an early stage. I could replace the file and noone else has
turned to me about this problem.

The parallel development of McStas at ILL is very unfortunate, but that
will be dealt with outside the email list.

Best regards,

Per-Olof Åstrand


Emmanuel Farhi wrote:

&gt; Dear Ulrich (and McStas users)
&gt;
&gt; There seems to have a few bugs in the new version 1.5, but I think
&gt; they are now corrected (or on the way).
&gt; Per-Olof is probably working on it. You may get the version 1.5 again,
&gt; in case there would have been an update (compare the archive sizes).
&gt;
&gt; What I can tell is that with the future vesion 1.6 (available at ILL
&gt; &lt;<A HREF="http://www.ill.fr/tas/mcstas/">http://www.ill.fr/tas/mcstas/</A>&gt;, I working with it all day, for tests)
&gt; your test instrument compiles well. In case you want to try it, I
&gt; invite you to get the version 1.6-ill and read carefully the CHANGES
&gt; from the ILL McStas page.
&gt;
&gt; Of course in case there would be any problem or suggestion about this
&gt; future (but already working) version, do not hesitate to tell me.
&gt;
&gt; Cheers. Emmanuel.
&gt;
&gt; "Ulrich C. Wildgruber MPI fuer Metallforschung Stuttgart" wrote:
&gt;
&gt;&gt; Dear fellow McStas user,
&gt;&gt;
&gt;&gt; just recently I switched to McStas 1.5 and everything went smooth
&gt;&gt; until I tried to compile the McStas generated C-code for an .inst
&gt;&gt; I used before.
&gt;&gt;
&gt;&gt;  I am getting the following error messages:
&gt;&gt;
&gt;&gt; wildgrub@pc-e21-18:/mc &gt; cc -o t t.c -lm
&gt;&gt; /home/wildgrub/lib/mcstas/Flux_adapter.comp: In function `mcinit':
&gt;&gt; /home/wildgrub/lib/mcstas/Flux_adapter.comp:92: `flad' undeclared
&gt;&gt; (first use in
&gt;&gt; this function)
&gt;&gt; /home/wildgrub/lib/mcstas/Flux_adapter.comp:92: (Each undeclared
&gt;&gt; identifier is
&gt;&gt; reported only once
&gt;&gt; /home/wildgrub/lib/mcstas/Flux_adapter.comp:92: for each function it
&gt;&gt; appears
&gt;&gt; in.)
&gt;&gt;
&gt;&gt; I'll attach t.instr for anybody interested in trying out!
&gt;&gt;
&gt;&gt; Is this a known problem ?
&gt;&gt; What am I doing wrong ?
&gt;&gt;
&gt;&gt; Any comments are greatly appreciated!!!
&gt;&gt;
&gt;&gt; Regards
&gt;&gt;
&gt;&gt; Uli
&gt;&gt;
&gt;&gt; P.S. 't.instr' is only the beginning of a longer file, the result
&gt;&gt; during
&gt;&gt; compile time however is identical...
&gt;&gt;
&gt;&gt; --
&gt;&gt; Ulrich WILDGRUBER
&gt;&gt; wildgrub@dxray.mpi-stuttgart.mpg.de
&gt;&gt; wwwmf.mpi-stuttgart.mpg.de/abteilungen/dosch/dosch.html
&gt;&gt; -------------------------------------------------------
&gt;&gt; ---------------------
&gt;&gt; Max-Planck-Institut für Metallforschung | Technische Universität
&gt;&gt; München
&gt;&gt; Heisenbergstr. 1                        | ZBE Neue
&gt;&gt; Forschungs-Neutronenquelle
&gt;&gt;                                         | Instrumentierung
&gt;&gt; D-70569 Stuttgart                       | D-85747 Garching/München
&gt;&gt; Tel.: (+49)-711-689-1900                | Tel.: (+49)-89-289-14681
&gt;&gt; Fax.: (+49)-711-689-1902                | Fax.: (+49)-89-289-14666
&gt;&gt;
&gt;&gt;
&gt;&gt; ------------------------------------------------------------------------
&gt;&gt;
&gt;&gt; DEFINE INSTRUMENT MatSciR(PHM, TTM, PHD)
&gt;&gt;
&gt;&gt; /*                                              improved version
&gt;&gt; 01/2001        */
&gt;&gt; /* NL-1: Alle (!) Segmente beruecksichtigt
&gt;&gt; ...                                  */
&gt;&gt; /*    work in
&gt;&gt; progress...                                                       */
&gt;&gt;
&gt;&gt; /*
&gt;&gt; */
&gt;&gt; /* Basic configuration of the monochromator with downstream
&gt;&gt; apertures           */
&gt;&gt; /*      n-Quelle:      Leiterende NL-1; m = 2, 2.5; 60mm wide, 120mm
&gt;&gt; high       */
&gt;&gt; /*      Monochromator: Mica d(002) = 9.95 A; Q = 2pi/d = 0.6315
&gt;&gt; rez.A           */
&gt;&gt; /*                     (a small vertical mosaic spread is more
&gt;&gt; realistic        */
&gt;&gt; /*              or:    HOPG d(002) = 3.355A; Q = 2pi/d = 1.8728
&gt;&gt; rez.A           */
&gt;&gt; /*                     220mm wide (long), 120mm high -
&gt;&gt; hypothetical             */
&gt;&gt; /*      Aperture 1:    25mm x
&gt;&gt; 5mm                                               */
&gt;&gt; /*               2:    not yet introduced
&gt;&gt; again                                 */
&gt;&gt; /*
&gt;&gt;                                        */
&gt;&gt; /*      Guide:         2m, sides only between apertures, m = 1, 2,
&gt;&gt; 3  (later)   */
&gt;&gt; /*      Detector:      after last
&gt;&gt; device                                        */
&gt;&gt;
&gt;&gt; DECLARE
&gt;&gt; %{
&gt;&gt; double mono_mosaic = 60;        /* Is less more ?  ...probably not
&gt;&gt; */
&gt;&gt; double mono_vmos   = 60;
&gt;&gt; /* double mono_q = 0.6315; */
&gt;&gt; double mono_q = 1.8728;
&gt;&gt; double mono_r0 = 1.0;
&gt;&gt; double m1 = 2.0;
&gt;&gt; double m2 = 2.5;
&gt;&gt; double alp = 6.49;
&gt;&gt; double CW = 0.003333;
&gt;&gt; %}
&gt;&gt;
&gt;&gt; INITIALIZE
&gt;&gt; %{
&gt;&gt; %}
&gt;&gt;
&gt;&gt; TRACE
&gt;&gt;
&gt;&gt; COMPONENT a1 = Arm()
&gt;&gt;   AT (0,0,0) ABSOLUTE
&gt;&gt;
&gt;&gt; COMPONENT source = Source_flat_lambda(
&gt;&gt;         radius = 0.15,
&gt;&gt;         dist = 2.595,
&gt;&gt;         xw = 0.11, yh = 0.17,
&gt;&gt;         lambda_0 = 2.0,
&gt;&gt;         d_lambda = 0.20)
&gt;&gt;   AT (0,0,0) RELATIVE a1
&gt;&gt;
&gt;&gt; COMPONENT flad = Flux_adapter(
&gt;&gt;         xmin = -0.055,
&gt;&gt;         xmax = 0.055,
&gt;&gt;         ymin = -0.085,
&gt;&gt;         ymax = 0.085,
&gt;&gt;         file = "./source.flux",
&gt;&gt;         options = " [ lambda p ]")
&gt;&gt;   AT (0,0,0.001) RELATIVE a1
&gt;&gt;
&gt;&gt; end
&gt;
&gt; --
&gt; What's up Doc ?
&gt; --------------------------------------------
&gt; Emmanuel FARHI, <A HREF="http://www.ill.fr/tas/people/Farhi.html">http://www.ill.fr/tas/people/Farhi.html</A>   \|/ ____ \|/
&gt; CS-Group ILL4/156, Institut Laue-Langevin (ILL) Grenoble  ~@-/ oO \-@~
&gt; 6 rue J. Horowitz, BP 156, 38042 Grenoble Cedex 9,France  /_( \__/ )_\
&gt; Work :Tel (33/0) 4 76 20 71 35. Fax (33/0) 4 76 48 39 06     \__U_/
&gt;
&gt;

--
Per-Olof Åstrand
Dept. of Chemistry, University of Copenhagen
and Materials Research Department, Risø National Laboratory
per-olof.aastrand@theory.ki.ku.dk or per-olof.aastrand@risoe.dk
<A HREF="http://theochem.ki.ku.dk/~peo/">http://theochem.ki.ku.dk/~peo/</A>




</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00007" HREF="msg00007.html">compile problem with mcstas-1.5</A></STRONG>
<UL><LI><EM>From:</EM> "Ulrich C. Wildgruber MPI fuer Metallforschung Stuttgart"&lt;wildgrub@dxray.mpi-stuttgart.mpg.de&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00008" HREF="msg00008.html">Re: compile problem with mcstas-1.5</A></STRONG>
<UL><LI><EM>From:</EM> Emmanuel Farhi &lt;farhi@ill.fr&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<LI>Prev by Date:
<STRONG><A HREF="msg00008.html">Re: compile problem with mcstas-1.5</A></STRONG>
</LI>

<LI>Next by Date:
<STRONG><A HREF="msg00010.html">McStas 1.5: if you encouter compilation problems</A></STRONG>
</LI>

<li>Index(es):
<ul>
<li><a href="index.html#00009"><strong>Chronological</Strong></a></li>
<li><a href="threads.html#00009"><strong>Thread</strong></a></li>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
