<P><strong><blink>This archive web page is obsolete!</blink></strong> 
<P>Please refer to the new <a href="/pipermail/neutron-mc">mailman<a> archive!


<!-- MHonArc v2.1.0 -->
<!--X-Subject: Re: compile problem with mcstas&#45;1.5 -->
<!--X-From: Emmanuel Farhi <farhi@ill.fr> -->
<!--X-Date: Mon, 22 Oct 2001 14:30:40 +0200 -->
<!--X-Message-Id: 3BD4116F.8EBAFD3D@ill.fr -->
<!--X-ContentType: multipart/alternative -->
<!--X-Reference-Id: 3BD40AC2.A5418613@dxray.mpi&#45;stuttgart.mpg.de -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: compile problem with mcstas-1.5</title>
<link rev="made" href="mailto:farhi@ill.fr">
</head>
<body bgcolor="white">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<A HREF="msg00007.html">Date Prev</A>][<A HREF="msg00009.html">Date Next</A>]
<a href="index.html#00008">[Chronological]</a>
<a href="threads.html#00008">[Thread]</a>
<a href="/cgi-bin/wilma/neutron-mc">[Top]</a>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>Re: compile problem with mcstas-1.5</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><strong>To</strong>: <strong><A HREF="mailto:wildgrub@dxray.mpi-stuttgart.mpg.de">wildgrub@dxray.mpi-stuttgart.mpg.de</A></strong></LI>
<LI><strong>Subject</strong>: <strong>Re: compile problem with mcstas-1.5</strong></LI>
<LI><strong>From</strong>: <strong>Emmanuel Farhi &lt;<A HREF="mailto:farhi@ill.fr">farhi@ill.fr</A>&gt;</strong></LI>
<LI>Date: Mon, 22 Oct 2001 14:30:40 +0200</LI>
<LI>Cc: <A HREF="mailto:neutron-mc@risoe.dk">neutron-mc@risoe.dk</A></LI>
<LI>Organization: ILL</LI>
<LI>References: &lt;<A HREF="msg00007.html">3BD40AC2.A5418613@dxray.mpi-stuttgart.mpg.de</A>&gt;</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->


Dear Ulrich (and McStas users)
<p>There seems to have a few bugs in the new version 1.5, but I think they
are now corrected (or on the way).
<br>Per-Olof is probably working on it. You may get the version 1.5 again,
in case there would have been an update (compare the archive sizes).
<p>What I can tell is that with the future vesion 1.6 (available at ILL
&lt;<A HREF="http://www.ill.fr/tas/mcstas/">http://www.ill.fr/tas/mcstas/</A>>, I working with it all day, for tests)
your test instrument compiles well. In case you want to try it, I invite
you to get the version 1.6-ill and read carefully the CHANGES from the
ILL McStas page.
<p>Of course in case there would be any problem or suggestion about this
future (but already working) version, do not hesitate to tell me.
<p>Cheers. Emmanuel.
<p>"Ulrich C. Wildgruber MPI fuer Metallforschung Stuttgart" wrote:
<blockquote TYPE=CITE>Dear fellow McStas user,
<p>just recently I switched to McStas 1.5 and everything went smooth
<br>until I tried to compile the McStas generated C-code for an .inst
<br>I used before.
<p>&nbsp;I am getting the following error messages:
<p>wildgrub@pc-e21-18:/mc > cc -o t t.c -lm
<br>/home/wildgrub/lib/mcstas/Flux_adapter.comp: In function `mcinit':
<br>/home/wildgrub/lib/mcstas/Flux_adapter.comp:92: `flad' undeclared (first
use in
<br>this function)
<br>/home/wildgrub/lib/mcstas/Flux_adapter.comp:92: (Each undeclared identifier
is
<br>reported only once
<br>/home/wildgrub/lib/mcstas/Flux_adapter.comp:92: for each function it
appears
<br>in.)
<p>I'll attach t.instr for anybody interested in trying out!
<p>Is this a known problem ?
<br>What am I doing wrong ?
<p>Any comments are greatly appreciated!!!
<p>Regards
<p>Uli
<p>P.S. 't.instr' is only the beginning of a longer file, the result during
<br>compile time however is identical...
<p>--
<br>Ulrich WILDGRUBER
<br>wildgrub@dxray.mpi-stuttgart.mpg.de
<br>wwwmf.mpi-stuttgart.mpg.de/abteilungen/dosch/dosch.html
<br>-----------------------------------------------------------------------------
<br>Max-Planck-Institut f&uuml;r Metallforschung | Technische Universit&auml;t
M&uuml;nchen
<br>Heisenbergstr. 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
| ZBE Neue Forschungs-Neutronenquelle
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
| Instrumentierung
<br>D-70569 Stuttgart&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
| D-85747 Garching/M&uuml;nchen
<br>Tel.: (+49)-711-689-1900&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
| Tel.: (+49)-89-289-14681
<br>Fax.: (+49)-711-689-1902&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
| Fax.: (+49)-89-289-14666
<p>&nbsp; ------------------------------------------------------------------------
<br>DEFINE INSTRUMENT MatSciR(PHM, TTM, PHD)
<p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
improved version 01/2001&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; */
<br>/* NL-1: Alle (!) Segmente beruecksichtigt ...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*/
<br>/*&nbsp;&nbsp;&nbsp; work in progress...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*/
<br>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*/
<br>/* Basic configuration of the monochromator with downstream apertures&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*/
<br>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; n-Quelle:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Leiterende NL-1; m = 2, 2.5; 60mm wide, 120mm high&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*/
<br>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Monochromator: Mica d(002) = 9.95
A; Q = 2pi/d = 0.6315 rez.A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*/
<br>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(a small vertical mosaic spread is more realistic&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*/
<br>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
or:&nbsp;&nbsp;&nbsp; HOPG d(002) = 3.355A; Q = 2pi/d = 1.8728 rez.A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*/
<br>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
220mm wide (long), 120mm high - hypothetical&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*/
<br>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Aperture 1:&nbsp;&nbsp;&nbsp; 25mm
x 5mm&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*/
<br>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
2:&nbsp;&nbsp;&nbsp; not yet introduced again&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*/
<br>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*/
<br>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Guide:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
2m, sides only between apertures, m = 1, 2, 3&nbsp; (later)&nbsp;&nbsp;
*/
<br>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Detector:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
after last device&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*/
<p>DECLARE
<br>%{
<br>double mono_mosaic = 60;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/* Is less more ?&nbsp; ...probably not */
<br>double mono_vmos&nbsp;&nbsp; = 60;
<br>/* double mono_q = 0.6315; */
<br>double mono_q = 1.8728;
<br>double mono_r0 = 1.0;
<br>double m1 = 2.0;
<br>double m2 = 2.5;
<br>double alp = 6.49;
<br>double CW = 0.003333;
<br>%}
<p>INITIALIZE
<br>%{
<br>%}
<p>TRACE
<p>COMPONENT a1 = Arm()
<br>&nbsp; AT (0,0,0) ABSOLUTE
<p>COMPONENT source = Source_flat_lambda(
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; radius = 0.15,
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dist = 2.595,
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; xw = 0.11, yh = 0.17,
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lambda_0 = 2.0,
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; d_lambda = 0.20)
<br>&nbsp; AT (0,0,0) RELATIVE a1
<p>COMPONENT flad = Flux_adapter(
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; xmin = -0.055,
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; xmax = 0.055,
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ymin = -0.085,
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ymax = 0.085,
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; file = "./source.flux",
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; options = " [ lambda p ]")
<br>&nbsp; AT (0,0,0.001) RELATIVE a1
<p>end</blockquote>

<pre>--&nbsp;
What's up Doc ?
--------------------------------------------
Emmanuel FARHI, <A HREF="http://www.ill.fr/tas/people/Farhi.html">http://www.ill.fr/tas/people/Farhi.html</A>&nbsp;&nbsp; \|/ ____ \|/
CS-Group ILL4/156, Institut Laue-Langevin (ILL) Grenoble&nbsp; ~@-/ oO \-@~
6 rue J. Horowitz, BP 156, 38042 Grenoble Cedex 9,France&nbsp; /_( \__/ )_\
Work :Tel (33/0) 4 76 20 71 35. Fax (33/0) 4 76 48 39 06&nbsp;&nbsp;&nbsp;&nbsp; \__U_/</pre>
&nbsp;

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00009" HREF="msg00009.html">Re: compile problem with mcstas-1.5</A></STRONG>
<UL><LI><EM>From:</EM> Per-Olof &Aring;strand &lt;per-olof.aastrand@risoe.dk&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00007" HREF="msg00007.html">compile problem with mcstas-1.5</A></STRONG>
<UL><LI><EM>From:</EM> "Ulrich C. Wildgruber MPI fuer Metallforschung Stuttgart"&lt;wildgrub@dxray.mpi-stuttgart.mpg.de&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<LI>Prev by Date:
<STRONG><A HREF="msg00007.html">compile problem with mcstas-1.5</A></STRONG>
</LI>

<LI>Next by Date:
<STRONG><A HREF="msg00009.html">Re: compile problem with mcstas-1.5</A></STRONG>
</LI>

<li>Index(es):
<ul>
<li><a href="index.html#00008"><strong>Chronological</Strong></a></li>
<li><a href="threads.html#00008"><strong>Thread</strong></a></li>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
