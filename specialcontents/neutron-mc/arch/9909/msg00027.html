<P><strong><blink>This archive web page is obsolete!</blink></strong> 
<P>Please refer to the new <a href="/pipermail/neutron-mc">mailman<a> archive!


<!-- MHonArc v2.1.0 -->
<!--X-Subject: Re: Optimizing McStas -->
<!--X-From: Farhi <farhi@ill.fr> -->
<!--X-Date: Wed, 22 Sep 1999 17:32:36 +0200 -->
<!--X-Message-Id: 37E8F694.DCD2A6E8@ill.fr -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 01JGA10NB7QY9KSJEX@risoe.dk -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: Optimizing McStas</title>
<link rev="made" href="mailto:farhi@ill.fr">
</head>
<body bgcolor="white">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<A HREF="msg00020.html">Date Prev</A>][<A HREF="msg00021.html">Date Next</A>]
<a href="index.html#00027">[Chronological]</a>
<a href="threads.html#00027">[Thread]</a>
<a href="/cgi-bin/wilma/neutron-mc">[Top]</a>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>Re: Optimizing McStas</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><strong>To</strong>: <strong>Kristian Nielsen &lt;<A HREF="mailto:kristian.nielsen@risoe.dk">kristian.nielsen@risoe.dk</A>&gt;</strong></LI>
<LI><strong>Subject</strong>: <strong>Re: Optimizing McStas</strong></LI>
<LI><strong>From</strong>: <strong>Farhi &lt;<A HREF="mailto:farhi@ill.fr">farhi@ill.fr</A>&gt;</strong></LI>
<LI>Date: Wed, 22 Sep 1999 17:32:36 +0200</LI>
<LI>Organization: ILL</LI>
<LI>References: &lt;01JGA10NB7QY9KSJEX@risoe.dk&gt;</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
Great !

please feel free to add kw_monitor to mcstas.

I'm really looking forward to see how you did implement your optimisation.
Can you put your adaptator in front of any component (in case user wants to
optimize flux on sample or final detector for instance). What kind of source
is it (rectangular, flat... ?). I guess you included a minimum and maximum
weight, in order not to completely delete bad neutrons (who knows, they can
perhaps reach detector sometimes...).

You choosed to use a 3D matrix for sampling neutron characteristics. This is
ok, and enables to take correlated parameters into account.
I was rather thinking about :
1- optimize x,y,vx,vy,vz and adapt p as required
2- use separate 1D arrays for each state parameter (limits would be
determined in a 1st phase (say 5% of ncounts). This means that parameters are
considered completely independent. It's a choice, but it enables fast
sampling, and low memory cost for any parameter number to be optimized. I
think it's ok if the minimum weight for bad neutrons is not 0 (say 10 % of
bad neutrons are kept)
3- a separate component from source and monitor. This would enable user to
select any kind of source, and optimize flux anywhere.
4- bad neutrons would be ABSORBed, this would lead to a new source shot.

Cheers again ! EF.

--
Emmanuel FARHI, <A HREF="http://www.ill.fr/tas/people/Farhi.html">http://www.ill.fr/tas/people/Farhi.html</A>     \|/ ____ \|/
TAS-Group, Institut Laue-Langevin (ILL) Grenoble            ~@-/ oO \-@~
Avenue des Martyrs, BP 156, 38042 Grenoble Cedex 9,France   /_( \__/ )_\
Work :Tel (33/0) 4 76 20 71 83. Fax (33/0) 4 76 48 39 06       \__U_/
La Grande Arche, Chateau d'Uriage, 38410 Saint Martin d'Uriage 04 76 59 73 94





</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00021" HREF="msg00021.html">Re: Optimizing McStas</A></STRONG>
<UL><LI><EM>From:</EM> Kristian Nielsen &lt;kristian.nielsen@risoe.dk&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<LI>Prev by Date:
<STRONG><A HREF="msg00020.html">Re: Optimizing McStas</A></STRONG>
</LI>

<LI>Next by Date:
<STRONG><A HREF="msg00021.html">Re: Optimizing McStas</A></STRONG>
</LI>

<li>Index(es):
<ul>
<li><a href="index.html#00027"><strong>Chronological</Strong></a></li>
<li><a href="threads.html#00027"><strong>Thread</strong></a></li>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
