<P><strong><blink>This archive web page is obsolete!</blink></strong> 
<P>Please refer to the new <a href="/pipermail/neutron-mc">mailman<a> archive!


<!-- MHonArc v2.1.0 -->
<!--X-Subject: Re: order of moving and rotating -->
<!--X-From: "Dr. Georg Artus" <Georg_Artus@Physik.TU&#45;Muenchen.DE> -->
<!--X-Date: Tue, 19 Jan 1999 12:21:30 +0000 -->
<!--X-Message-Id: 36A478CA.D4256100@ph.tum.de -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 01J6OYJRKSAO8X5TPW@risoe.dk -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: order of moving and rotating</title>
<link rev="made" href="mailto:Georg_Artus@Physik.TU-Muenchen.DE">
</head>
<body bgcolor="white">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<A HREF="msg00001.html">Date Prev</A>][<A HREF="msg00010.html">Date Next</A>]
<a href="index.html#00002">[Chronological]</a>
<a href="threads.html#00002">[Thread]</a>
<a href="/cgi-bin/wilma/neutron-mc">[Top]</a>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>Re: order of moving and rotating</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><strong>To</strong>: <strong><A HREF="mailto:neutron-mc@risoe.dk">neutron-mc@risoe.dk</A></strong></LI>
<LI><strong>Subject</strong>: <strong>Re: order of moving and rotating</strong></LI>
<LI><strong>From</strong>: <strong>"Dr. Georg Artus" &lt;<A HREF="mailto:Georg_Artus@Physik.TU-Muenchen.DE">Georg_Artus@Physik.TU-Muenchen.DE</A>&gt;</strong></LI>
<LI>Date: Tue, 19 Jan 1999 12:21:30 +0000</LI>
<LI>Organization: TUM</LI>
<LI>References: &lt;<A HREF="msg00001.html">01J6OYJRKSAO8X5TPW@risoe.dk</A>&gt;</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
Hello,

thanks for the help with rotation an translation of components. 
I'm finishing with the simulations for our diffractometer and hopefully
I have found the best configuration now...
I also compared beamline and McStas more exactly and not only
transmissions but also profiles match really good. The remaining (small)
differences can be explained by the different handling of the mirror
reflectivities.

Last year in one of the mails in this list Kristian or Kim mentioned
that a general single crystal sample is in work and will be available
1999. When will that be?

Georg


Kristian Nielsen wrote:
&gt; 
&gt; &gt; Hello,
&gt; &gt;
&gt; &gt; First of all a happy new year to all of you!
&gt; 
&gt; Thanks! I apologize for taking a bit long to answer your question.
&gt; 
&gt; &gt; Now the question:
&gt; &gt; I'm trying to optimize the angle of a specific mirror in the neutron
&gt; &gt; path. From the manual and also the results of the calculations it is not
&gt; &gt; quite clear to me, how the mirror is moved and rotated and what the
&gt; &gt; reference points are.
&gt; 
&gt; Yes, this is a point that can be a bit confusing, and I am planning on
&gt; writing a clarification in the next version of the manual.
&gt; 
&gt; But if you approach the issue in the right way, it is not at all
&gt; complicated. The coordinate system of a component has a position and an
&gt; orientation. The position is the spatial location of the reference
&gt; point. The orientation is the direction of the axes.
&gt; 
&gt; Now, when a component is specified in the instrument definition, it has
&gt; an AT and a ROTATED specification. The AT specifies the position and the
&gt; ROTATED specifies the orientation.
&gt; 
&gt; Thus if component C is AT (x,y,z) relative component A and ROTATED
&gt; (v,0,0) relative component B, the reference point of C is at (x,y,z) in
&gt; the coordinate system of A and the axes of C are the axes of B rotated
&gt; the angle v around the X axis of B.
&gt; 
&gt; &gt; Am I right, that any rotation is done after the translation, and that
&gt; &gt; the rotation axes are the (not translated) axes of the coordinate system
&gt; &gt; defined by the RELATIVE command? Or are only the directions of the
&gt; &gt; rotation axis those of the component defined by RELATIVE, but the center
&gt; &gt; of rotation now lies at (0,0,0) of the already moved component?
&gt; &gt; Thanks for any advice!
&gt; 
&gt; The last of your two possibilities describes most precisely what happens
&gt; in McStas, I think. I hope the above explanation clarifies the issue. If
&gt; not, ask again and I will use your feedback when updating the manual.
&gt; 
&gt; A quick remark on the use on the mirror component. Consider building a
&gt; guide from four mirrors. The guide entrance and exit are parallel to
&gt; the X-Y plane, the guide top and bottom are parallel to the X-Z plane
&gt; and the guide left and right sides are parallel to the Y-Z plane. The
&gt; mirror component lies in the X-Y plane of the component local coordinate
&gt; system. Thus to get the top or bottom, the mirror should be rotated
&gt; about the X axis and moved up or down. To get the sides, the mirror
&gt; should be rotated about the Y axis and moved left or right.
&gt; 
&gt; I just finished a much improved version of the graphics display program
&gt; for McStas simulations. It is capable of drawing real sketches of
&gt; components so that one may see the exact position and orientation of
&gt; every component. This will be in the next McStas release (due in March),
&gt; and should greatly help understanding the setup of ones instrument.
&gt; 
&gt;  - Kristian.

-- 
*********************************************

Dr. Georg Artus
Technische Universitaet Muenchen
FRM-II Reaktorstation
D-85747 Garching

Tel: +49 (0)89/289-14675
Fax: +49 (0)89/289-14666 or 12112
E-mail: gartus@ph.tum.de

</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00004" HREF="msg00004.html">Re: order of moving and rotating</A></STRONG>
<UL><LI><EM>From:</EM> Kristian Nielsen &lt;kristian.nielsen@risoe.dk&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00001" HREF="msg00001.html">Re: order of moving and rotating</A></STRONG>
<UL><LI><EM>From:</EM> Kristian Nielsen &lt;kristian.nielsen@risoe.dk&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<LI>Prev by Date:
<STRONG><A HREF="msg00001.html">Re: order of moving and rotating</A></STRONG>
</LI>

<LI>Next by Date:
<STRONG><A HREF="msg00010.html">McStas installation and questions</A></STRONG>
</LI>

<li>Index(es):
<ul>
<li><a href="index.html#00002"><strong>Chronological</Strong></a></li>
<li><a href="threads.html#00002"><strong>Thread</strong></a></li>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
