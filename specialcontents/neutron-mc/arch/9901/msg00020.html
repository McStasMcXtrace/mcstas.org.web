<P><strong><blink>This archive web page is obsolete!</blink></strong> 
<P>Please refer to the new <a href="/pipermail/neutron-mc">mailman<a> archive!


<!-- MHonArc v2.1.0 -->
<!--X-Subject: Re: Error in Calculation of absolute Flux (Source_flux) ??? -->
<!--X-From: Kristian Nielsen <kristian.nielsen@risoe.dk> -->
<!--X-Date: 27 Jan 1999 08:38:41 +0100 -->
<!--X-Message-Id:  -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 36AC8635.E6C18FA1@ph.tum.de -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: Error in Calculation of absolute Flux (Source_flux) ???</title>
<link rev="made" href="mailto:kristian.nielsen@risoe.dk">
</head>
<body bgcolor="white">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<A HREF="msg00023.html">Date Prev</A>][<A HREF="msg00024.html">Date Next</A>]
<a href="index.html#00020">[Chronological]</a>
<a href="threads.html#00020">[Thread]</a>
<a href="/cgi-bin/wilma/neutron-mc">[Top]</a>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>Re: Error in Calculation of absolute Flux (Source_flux) ???</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><strong>To</strong>: <strong><A HREF="mailto:Georg_Artus@Physik.TU-Muenchen.DE">Georg_Artus@Physik.TU-Muenchen.DE</A></strong></LI>
<LI><strong>Subject</strong>: <strong>Re: Error in Calculation of absolute Flux (Source_flux) ???</strong></LI>
<LI><strong>From</strong>: <strong>Kristian Nielsen &lt;<A HREF="mailto:kristian.nielsen@risoe.dk">kristian.nielsen@risoe.dk</A>&gt;</strong></LI>
<LI>Date: 27 Jan 1999 08:38:41 +0100</LI>
<LI>CC: <A HREF="mailto:kim.lefmann@risoe.dk">kim.lefmann@risoe.dk</A>, <A HREF="mailto:Ralph_Gilles@Physik.TU-Muenchen.DE">Ralph_Gilles@Physik.TU-Muenchen.DE</A></LI>
<LI>In-reply-to: &lt;<A HREF="msg00019.html">36AC8635.E6C18FA1@ph.tum.de</A>&gt; (Georg_Artus@Physik.TU-Muenchen.DE)</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
&gt; Here is what beamline does:

Ok thanks for the explanation of Beamline.

&gt; You can transform the McStas output monitor_I to the Beamline output by
&gt; dividing by the monitor area and teh wavelength range (2*dE in AA). It
&gt; fits very well! We have tried it with several guides. 

Ok. I have modified the Monitor component to create a Monitor_flux
component that does exactly this. It takes two extra input parameters:
the lower and upper limit of the wavelength range to consider (eg.  lmin
= sqrt(81.81/(E+dE)), lmax = sqrt(81.81/(E-dE)) in your case). I think
that letting the user supply the wavelength range is more general than
just taking the values from the source component (ie. what happens if
another source component with no dE is used?).

I tried running the two test instruments you send in the first mail,
modified to use the Monitor_flux component (and with the height typo
fixed). The results, including the correct units, match those you gave
for Beamline:

straight     3.5                 1.69E+09
focusing     2.9                 1.80E+09

I put the Monitor_flux, as well as the modified test instruments, on our
web page at

    <A HREF="http://neutron.risoe.dk/mcstas/support/artus/">http://neutron.risoe.dk/mcstas/support/artus/</A>

The unit for lmin and lmax of the Monitor_flux component is AA and the
output is in n/cm**2/AA, which is what you need, I think. There is
starting to be a lot of inconsistency between using neutron energies in
meV and neutron wavelengths in AA in the different components, but that
I something I have to sort out in some way. One idea I have is to build
in knowledge about common units in McStas so that the user can just say
"20 [meV]" or "4 [AA]" or "2000 [m/s]" and McStas will sort it out by
itself, but that is for the future.

&gt; I hope this all is not too much trouble! I am glad that I have to think
&gt; again about things I thought to be a matter of course. They are not... 
&gt; 
&gt; Probably you know already that Ralph Gilles (vis a vis to my desk) and
&gt; Peter Link (next door) are starting with McStas!

No trouble at all, we measure the success of McStas to a large degree on
the extent to which it is used by others. So we are very happy that you
are using the program, and quite willing to help. And as you, I find it
very useful to discuss these things and get to think about them, I have
now a much clearer idea how to handle absolute flux better in McStas in
future releases.

 - Kristian.




</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00019" HREF="msg00019.html">Re: Error in Calculation of absolute Flux (Source_flux) ???</A></STRONG>
<UL><LI><EM>From:</EM> "Dr. Georg Artus" &lt;Georg_Artus@Physik.TU-Muenchen.DE&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<LI>Prev by Date:
<STRONG><A HREF="msg00023.html">Re: McStas installation and questions</A></STRONG>
</LI>

<LI>Next by Date:
<STRONG><A HREF="msg00024.html">Re: McStas installation and questions</A></STRONG>
</LI>

<li>Index(es):
<ul>
<li><a href="index.html#00020"><strong>Chronological</Strong></a></li>
<li><a href="threads.html#00020"><strong>Thread</strong></a></li>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
