<P><strong><blink>This archive web page is obsolete!</blink></strong> 
<P>Please refer to the new <a href="/pipermail/neutron-mc">mailman<a> archive!


<!-- MHonArc v2.1.0 -->
<!--X-Subject: Re: order of moving and rotating -->
<!--X-From: Kristian Nielsen <kristian.nielsen@risoe.dk> -->
<!--X-Date: Mon, 18 Jan 1999 16:44:06 +0100 -->
<!--X-Message-Id: 01J6OYJRKSAO8X5TPW@risoe.dk -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 36963D36.7E94E913@ph.tum.de -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: order of moving and rotating</title>
<link rev="made" href="mailto:kristian.nielsen@risoe.dk">
</head>
<body bgcolor="white">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<A HREF="msg00009.html">Date Prev</A>][<A HREF="msg00002.html">Date Next</A>]
<a href="index.html#00001">[Chronological]</a>
<a href="threads.html#00001">[Thread]</a>
<a href="/cgi-bin/wilma/neutron-mc">[Top]</a>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>Re: order of moving and rotating</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><strong>To</strong>: <strong><A HREF="mailto:Georg_Artus@Physik.TU-Muenchen.DE">Georg_Artus@Physik.TU-Muenchen.DE</A></strong></LI>
<LI><strong>Subject</strong>: <strong>Re: order of moving and rotating</strong></LI>
<LI><strong>From</strong>: <strong>Kristian Nielsen &lt;<A HREF="mailto:kristian.nielsen@risoe.dk">kristian.nielsen@risoe.dk</A>&gt;</strong></LI>
<LI>Date: Mon, 18 Jan 1999 16:44:06 +0100</LI>
<LI>Cc: <A HREF="mailto:neutron-mc@risoe.dk">neutron-mc@risoe.dk</A></LI>
<LI>Date-warning: Date header was inserted by risoe.dk</LI>
<LI>In-reply-to: &lt;<A HREF="msg00000.html">36963D36.7E94E913@ph.tum.de</A>&gt; (Georg_Artus@Physik.TU-Muenchen.DE)</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
&gt; Hello,
&gt; 
&gt; First of all a happy new year to all of you!

Thanks! I apologize for taking a bit long to answer your question.

&gt; Now the question:
&gt; I'm trying to optimize the angle of a specific mirror in the neutron
&gt; path. From the manual and also the results of the calculations it is not
&gt; quite clear to me, how the mirror is moved and rotated and what the
&gt; reference points are.

Yes, this is a point that can be a bit confusing, and I am planning on
writing a clarification in the next version of the manual.

But if you approach the issue in the right way, it is not at all
complicated. The coordinate system of a component has a position and an
orientation. The position is the spatial location of the reference
point. The orientation is the direction of the axes.

Now, when a component is specified in the instrument definition, it has
an AT and a ROTATED specification. The AT specifies the position and the
ROTATED specifies the orientation.

Thus if component C is AT (x,y,z) relative component A and ROTATED
(v,0,0) relative component B, the reference point of C is at (x,y,z) in
the coordinate system of A and the axes of C are the axes of B rotated
the angle v around the X axis of B.

&gt; Am I right, that any rotation is done after the translation, and that
&gt; the rotation axes are the (not translated) axes of the coordinate system
&gt; defined by the RELATIVE command? Or are only the directions of the
&gt; rotation axis those of the component defined by RELATIVE, but the center
&gt; of rotation now lies at (0,0,0) of the already moved component?
&gt; Thanks for any advice!

The last of your two possibilities describes most precisely what happens
in McStas, I think. I hope the above explanation clarifies the issue. If
not, ask again and I will use your feedback when updating the manual.

A quick remark on the use on the mirror component. Consider building a
guide from four mirrors. The guide entrance and exit are parallel to
the X-Y plane, the guide top and bottom are parallel to the X-Z plane
and the guide left and right sides are parallel to the Y-Z plane. The
mirror component lies in the X-Y plane of the component local coordinate
system. Thus to get the top or bottom, the mirror should be rotated
about the X axis and moved up or down. To get the sides, the mirror
should be rotated about the Y axis and moved left or right.

I just finished a much improved version of the graphics display program
for McStas simulations. It is capable of drawing real sketches of
components so that one may see the exact position and orientation of
every component. This will be in the next McStas release (due in March),
and should greatly help understanding the setup of ones instrument.

 - Kristian.


</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00002" HREF="msg00002.html">Re: order of moving and rotating</A></STRONG>
<UL><LI><EM>From:</EM> "Dr. Georg Artus" &lt;Georg_Artus@Physik.TU-Muenchen.DE&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00000" HREF="msg00000.html">order of moving and rotating</A></STRONG>
<UL><LI><EM>From:</EM> "Dr. Georg Artus" &lt;Georg_Artus@Physik.TU-Muenchen.DE&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<LI>Prev by Date:
<STRONG><A HREF="msg00009.html">Installing McStas at ILL</A></STRONG>
</LI>

<LI>Next by Date:
<STRONG><A HREF="msg00002.html">Re: order of moving and rotating</A></STRONG>
</LI>

<li>Index(es):
<ul>
<li><a href="index.html#00001"><strong>Chronological</Strong></a></li>
<li><a href="threads.html#00001"><strong>Thread</strong></a></li>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
