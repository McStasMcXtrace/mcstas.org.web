<P><strong><blink>This archive web page is obsolete!</blink></strong> 
<P>Please refer to the new <a href="/pipermail/neutron-mc">mailman<a> archive!


<!-- MHonArc v2.1.0 -->
<!--X-Subject: Re: Error in Calculation of absolute Flux (Source_flux) ??? -->
<!--X-From: "Dr. Georg Artus" <Georg_Artus@Physik.TU&#45;Muenchen.DE> -->
<!--X-Date: Fri, 22 Jan 1999 13:21:26 +0000 -->
<!--X-Message-Id: 36A87B56.CF5A647B@ph.tum.de -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 01J6UBYHXD748X7I94@risoe.dk -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: Error in Calculation of absolute Flux (Source_flux) ???</title>
<link rev="made" href="mailto:Georg_Artus@Physik.TU-Muenchen.DE">
</head>
<body bgcolor="white">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<A HREF="msg00007.html">Date Prev</A>][<A HREF="msg00013.html">Date Next</A>]
<a href="index.html#00011">[Chronological]</a>
<a href="threads.html#00011">[Thread]</a>
<a href="/cgi-bin/wilma/neutron-mc">[Top]</a>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>Re: Error in Calculation of absolute Flux (Source_flux) ???</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><strong>To</strong>: <strong>Kristian Nielsen &lt;<A HREF="mailto:kristian.nielsen@risoe.dk">kristian.nielsen@risoe.dk</A>&gt;</strong></LI>
<LI><strong>Subject</strong>: <strong>Re: Error in Calculation of absolute Flux (Source_flux) ???</strong></LI>
<LI><strong>From</strong>: <strong>"Dr. Georg Artus" &lt;<A HREF="mailto:Georg_Artus@Physik.TU-Muenchen.DE">Georg_Artus@Physik.TU-Muenchen.DE</A>&gt;</strong></LI>
<LI>Date: Fri, 22 Jan 1999 13:21:26 +0000</LI>
<LI>Organization: TUM</LI>
<LI>References: &lt;<A HREF="msg00007.html">01J6UBYHXD748X7I94@risoe.dk</A>&gt;</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
Hello,

&gt; I think you have a typo here (or else I did not understand you
&gt; properly). The guide entrance is 10cm high, but the exit is 1cm.

Ooops! I checked the real input file and there the numbers were correct!
Probably I copied wrong files from another directory or so. Nevertheless
I checked the input files again, compiled and started them with correct
heights and the results are still those I wrote in my last mail.
 
&gt; Hm. I am starting to think that I may have mislead you about fluxes in
&gt; McStas. The ONLY place the notion of flux is used in McStas is in the
&gt; "flux" parameter of Source_flux. All the monitors simulate real
&gt; monitors/detectors, and compute neutron counts, not neutron fluxes.
&gt; Depending on your viewpoint, you can say that you are simulating a one
&gt; second experiment; then the monitors count neutrons per second.

This starts clearifying things. The misleading thing was in fact the
answer to my question, 

                        |
                        V
"
&gt; What are the units of I and M2 for any monitor when I use source_flux?
&gt; I assume it is n/cm**2/s/AA?

It is n/cm**2/time/st/AA, where the 'st' means steradian (units of solid
angle), and 'time' is the same unit as the one supplied for the 'flux'
parameter of the component (McStas does not really have any comcept of
the duration of an experiment).
"

&gt; What this means is that if you want the flux in n/cm**2, you need to
&gt; divide by the area of the monitor. Since the flux will probably depend
&gt; on the position, you really need to use a position-sensitive detector
&gt; and divide each bin by the pixel area. I suspect that the McStas flux
&gt; values given above are in fact the "raw" counts in monitor2.
&gt; When I divide by the monitor area, I get the following numbers:
&gt; 
&gt;                              Flux [neutrons/cm**2]
&gt; straight     3.43                1.71E7
&gt; focusing     2.87                1.79E7
&gt; 
&gt; These numbers match well with the Beamline results when compared relatively.
&gt; 
&gt; To get the units in neutrons/AA, it would be necessary to use an energy
&gt; sensitive detector and divide each bin by its wavelength range.

Now this all sounds very logical. The latter sounds not easy. What is
the wavelength range when you don't have an even distribution (as you
have it at the source)? This distribution of course changes after any
component.

&gt; I hope this clarifies matters? Otherwise, please ask again. Do you think
&gt; the way the monitors in McStas work should be changed to handle flux
&gt; like in Beamline, and if so, why?

It would be extremely useful to have monitors which calculate flux
densities! If one (as we have to do it here) wants to compare different
complicated guide systems (primary guide, monochromator, secondary
guide, sample) the only measure for comparison is absolute flux density.
Anything like transmission or n/time doesn't help, since we have to
alter all entrance and exit heights, monochromator heights, sample sizes
and so on. It would be extremely tedious to get the flux densities by
hand! I had about 500 numbers in the last weeks I would have to treat
like this! Doing All these calculations by hand is just impossible. 
If one wants to compare different real instruments, different
simulations or the results of different simulation software the three
most important numbers are transmission, flux and flux density. May be
it would be a good idea to give not only the numbers in the output file
but also the according units.
If you see the chance of writing a monitor, which computes flux
densities automatically, it would be of really great help to us!

Many thanks!

Georg
 

-- 
*********************************************

Dr. Georg Artus
Technische Universitaet Muenchen
FRM-II Reaktorstation
D-85747 Garching

Tel: +49 (0)89/289-14675
Fax: +49 (0)89/289-14666 or 12112
E-mail: gartus@ph.tum.de


</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00012" HREF="msg00012.html">Re: Error in Calculation of absolute Flux (Source_flux) ???</A></STRONG>
<UL><LI><EM>From:</EM> Kristian Nielsen &lt;kristian.nielsen@risoe.dk&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00007" HREF="msg00007.html">Re: Error in Calculation of absolute Flux (Source_flux) ???</A></STRONG>
<UL><LI><EM>From:</EM> Kristian Nielsen &lt;kristian.nielsen@risoe.dk&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<LI>Prev by Date:
<STRONG><A HREF="msg00007.html">Re: Error in Calculation of absolute Flux (Source_flux) ???</A></STRONG>
</LI>

<LI>Next by Date:
<STRONG><A HREF="msg00013.html">Re: McStas installation and questions</A></STRONG>
</LI>

<li>Index(es):
<ul>
<li><a href="index.html#00011"><strong>Chronological</Strong></a></li>
<li><a href="threads.html#00011"><strong>Thread</strong></a></li>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
