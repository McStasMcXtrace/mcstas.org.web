<P><strong><blink>This archive web page is obsolete!</blink></strong> 
<P>Please refer to the new <a href="/pipermail/neutron-mc">mailman<a> archive!


<!-- MHonArc v2.1.0 -->
<!--X-Subject: Re: Again: maximum number of events... -->
<!--X-From: "Ulrich C. Wildgruber MPI fuer Metallforschung Stuttgart"<wildgrub@dxray.mpi&#45;stuttgart.mpg.de> -->
<!--X-Date: Mon, 05 Mar 2001 14:06:27 +0100 -->
<!--X-Message-Id: 3AA38F53.22411C9@dxray.mpi&#45;stuttgart.mpg.de -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 3AA34FFE.E3B2B252@dxray.mpi&#45;stuttgart.mpg.de -->
<!--X-Reference-Id: 3AA36A49.282C40B@phys.keele.ac.uk -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: Again: maximum number of events...</title>
<link rev="made" href="mailto:wildgrub@dxray.mpi-stuttgart.mpg.de">
</head>
<body bgcolor="white">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<A HREF="msg00001.html">Date Prev</A>][<A HREF="msg00003.html">Date Next</A>]
<a href="index.html#00002">[Chronological]</a>
<a href="threads.html#00002">[Thread]</a>
<a href="/cgi-bin/wilma/neutron-mc">[Top]</a>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>Re: Again: maximum number of events...</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><strong>To</strong>: <strong>Mark Hagen &lt;<A HREF="mailto:pha70@phys.keele.ac.uk">pha70@phys.keele.ac.uk</A>&gt;,"<A HREF="mailto:neutron-mc@risoe.dk">neutron-mc@risoe.dk</A>" &lt;<A HREF="mailto:neutron-mc@risoe.dk">neutron-mc@risoe.dk</A>&gt;</strong></LI>
<LI><strong>Subject</strong>: <strong>Re: Again: maximum number of events...</strong></LI>
<LI><strong>From</strong>: <strong>"Ulrich C. Wildgruber MPI fuer Metallforschung Stuttgart"&lt;<A HREF="mailto:wildgrub@dxray.mpi-stuttgart.mpg.de">wildgrub@dxray.mpi-stuttgart.mpg.de</A>&gt;</strong></LI>
<LI>Date: Mon, 05 Mar 2001 14:06:27 +0100</LI>
<LI>Organization: MPI fuer Metallforschung Stuttgart</LI>
<LI>References: &lt;<A HREF="msg00000.html">3AA34FFE.E3B2B252@dxray.mpi-stuttgart.mpg.de</A>&gt;&lt;3AA36A49.282C40B@phys.keele.ac.uk&gt;</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
Mark Hagen wrote:
&gt; 
&gt; Dear Ulrich,
&gt; 
&gt; Apologies if I am saying the obvious here, or if what I am saying is already
&gt; known, but 2e9 is close to 2**31-1, the limit for a "signed int" (i.e. default
&gt; integer) on a 32 bit machine. Presumably a signed int on a 64 bit ALpha is much
&gt; larger. If you try an integer larger than 2e9 then presumably you get a memory
&gt; overspill and uncontrolled results (the program goes on and on forever). Many
&gt; compilers don't trap integer overflow by default, I'm not sure what settings the
&gt; gcc in McStas has for this but it may ignore the overflow (it may even use an
&gt; integer overflow in the random number generator).
&gt; 
&gt; You could test this if you could find in the code the definition of the integer
&gt; holding the number of neutrons and change it from "int" to "long int" or even
&gt; "unsigned int" (the later would get you to 2**32, i.e. 4e9, while the former
&gt; would get you to the same integer precision as the Alpha presumably).
&gt; 
&gt; If you want someone to try your job next weekend (I calculate from your figures
&gt; that it will take 25 hours to run if it works ?) then I will give it a go on my
&gt; Mandrake 7.0 (450MHz Pentium III). Although it has to be next weekend since I
&gt; need the PC for other things during the week.
&gt; 
&gt; Don't know if that is any help,
&gt; 
&gt; cheers,
&gt; 
&gt; Mark
&gt; 

Dear Mark,

thanks for the quick response and the offer to run a 25 hours job on a
machine of yours. I am really interested in seeing what would happen on
your PC because of the following:
A while ago I ran a 3e+09 job on my office PC (SuSe 6.4) which I stopped after
- what I thought was - plenty of time to complete. I sent an email to 
Per-Olof assuming that counting of neutrons was done with a "plain" integer
variable where you should run into the 2**31-1 problem. I was asking Per-Olof
to add an additional (outer) loop to be able to run more neutrons through
mcstas. Per-olof kindly forwarded my message to Kristian who told me (us)
that he is using a floating point variable to count the neutrons. This should
allow to run much longer jobs than I wanted to...
I used an ALPHA workstation to try it again and it worked just fine (at least
up to n=4e+09) i.e the program comes to a regular end. I was using the ALPHA
to run those bigger jobs for a couple of weeks but finally decided to
reinstall mcstas on the Linux machine and try it there too.
I hoped it would work and I waited and waited and waited until this morning...

Maybe I misunderstood Kristian's email (I'll look for it and forward it to
you) or there is something wrong with the way McStas is set up on my
machine. The behaviour of McStas seems to be compatible with an "long int" 
counting variable being 32bits on a PC and 64 bits on the ALPHA...
I guess I'll try to look into the code...

Nevertheless I'd appreciate if you give it a go next weekend unless I (we)
have found an answer to this "mystery" by then...

Thanks again!

Regards

Uli

-- 
Ulrich WILDGRUBER
wildgrub@dxray.mpi-stuttgart.mpg.de
wwwmf.mpi-stuttgart.mpg.de/abteilungen/dosch/dosch.html
-----------------------------------------------------------------------------
Max-Planck-Institut für Metallforschung	| Technische Universität München
Heisenbergstr. 1		        | ZBE Neue Forschungs-Neutronenquelle
					| Instrumentierung
D-70569 Stuttgart			| D-85747 Garching/München
Tel.: (+49)-711-689-1900		| Tel.: (+49)-89-289-14681
Fax.: (+49)-711-689-1902		| Fax.: (+49)-89-289-14666

</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00000" HREF="msg00000.html">Again: maximum number of events...</A></STRONG>
<UL><LI><EM>From:</EM> "Ulrich C. Wildgruber MPI fuer Metallforschung Stuttgart"&lt;wildgrub@dxray.mpi-stuttgart.mpg.de&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<LI>Prev by Date:
<STRONG><A HREF="msg00001.html">Names of Variables</A></STRONG>
</LI>

<LI>Next by Date:
<STRONG><A HREF="msg00003.html">Again: maximum number of events</A></STRONG>
</LI>

<li>Index(es):
<ul>
<li><a href="index.html#00002"><strong>Chronological</Strong></a></li>
<li><a href="threads.html#00002"><strong>Thread</strong></a></li>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
