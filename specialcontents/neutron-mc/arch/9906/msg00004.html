<P><strong><blink>This archive web page is obsolete!</blink></strong> 
<P>Please refer to the new <a href="/pipermail/neutron-mc">mailman<a> archive!


<!-- MHonArc v2.1.0 -->
<!--X-Subject: Questions -->
<!--X-From: "Dr. Oliver Kirstein" <o.kirstein@fz&#45;juelich.de> -->
<!--X-Date: Wed, 09 Jun 1999 08:30:52 +0200 -->
<!--X-Message-Id: 375E0A1C.FC6F3781@fz&#45;juelich.de -->
<!--X-ContentType: multipart/mixed -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Questions</title>
<link rev="made" href="mailto:o.kirstein@fz-juelich.de">
</head>
<body bgcolor="white">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[Date Prev][<A HREF="msg00005.html">Date Next</A>]
<a href="index.html#00004">[Chronological]</a>
<a href="threads.html#00004">[Thread]</a>
<a href="/cgi-bin/wilma/neutron-mc">[Top]</a>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>Questions</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><strong>To</strong>: <strong><A HREF="mailto:kristian.nielsen@risoe.dk">kristian.nielsen@risoe.dk</A></strong></LI>
<LI><strong>Subject</strong>: <strong>Questions</strong></LI>
<LI><strong>From</strong>: <strong>"Dr. Oliver Kirstein" &lt;<A HREF="mailto:o.kirstein@fz-juelich.de">o.kirstein@fz-juelich.de</A>&gt;</strong></LI>
<LI>Date: Wed, 09 Jun 1999 08:30:52 +0200</LI>
<LI>Organization: IFF, Institut 5, Neutronenstreuung II</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
Hi Kristian!

I'm still working on the PST component but I have now another question
concerning the handling of the neutron coordinates in McStas: I try to
build a large focusing monochromator (horizontal &amp; vertical) for a
backscattering device (this is simply a three axis spectrometer where
the third axis points in the opposite direction of the first defelector
crystal. I attached two examples focus69.instr (somthing like a 3-axis
spec) and focus90.instr (backscattering type) and you will se the
difference with mcdisplay.

What make me wonder is the fact that the number of neutrons which reach
the final energy monitor reduces drastically in the case of focus90
although the reflectivity due to the 90-deg-geometry should be better.
Is it possible that the neutron passes the first deflector crystal
(called mono1) twice in contrast to the focus69-type and that the
neutrons detected are those which have been transmitted?

(I started both programs with focusXX --ncount 1.e5 --dir=simXX
--seed=1)

Thank you for your help.

Regards,

Oliver


-- 
===============================================================================

   _/_/_/ _/_/_/_/_/ _/_/_/_/_/  Oliver Kirstein
     _/     _/         _/        IFF, Neutronenstreuung
     _/     _/_/_/     _/_/_/    Forschungszentrum Juelich
     _/     _/         _/        D-52425 Juelich
     _/     _/         _/        Tel.: +49 (0)2461 614532
   _/_/_/   _/         _/        Fax.: +49 (0)2461 612610
                                
<A HREF="http://iff034.iff.kfa-juelich.de/Oliver/">http://iff034.iff.kfa-juelich.de/Oliver/</A>
===============================================================================
</PRE>
<PRE>
DEFINE INSTRUMENT focus()

DECLARE
%{
  double TTM, TTM2;
  double EN, DEN, LMIN, LMAX;

  double ZMINM, ZMAXM, YMINM, YMAXM, MOSAICHM, MOSAICVM, R0M, QMM;

  double OMM, MONO_Y, MONO_Z;
  double OMM2, Q2;

// #include "mono_var"
 double XPOSM_0  , YPOSM_0  , ZPOSM_0  ;
 double XROTM_0  , YROTM_0  , ZROTM_0  ;

 double XPOSM_1  , YPOSM_1  , ZPOSM_1  ;
 double XROTM_1  , YROTM_1  , ZROTM_1  ;

 double XPOSM_2  , YPOSM_2  , ZPOSM_2  ;
 double XROTM_2  , YROTM_2  , ZROTM_2  ;

 double XPOSM_3  , YPOSM_3  , ZPOSM_3  ;
 double XROTM_3  , YROTM_3  , ZROTM_3  ;

 double XPOSM_4  , YPOSM_4  , ZPOSM_4  ;
 double XROTM_4  , YROTM_4  , ZROTM_4  ;

 double XPOSM_5  , YPOSM_5  , ZPOSM_5  ;
 double XROTM_5  , YROTM_5  , ZROTM_5  ;

 double XPOSM_6  , YPOSM_6  , ZPOSM_6  ;
 double XROTM_6  , YROTM_6  , ZROTM_6  ;

 double XPOSM_7  , YPOSM_7  , ZPOSM_7  ;
 double XROTM_7  , YROTM_7  , ZROTM_7  ;

 double XPOSM_8  , YPOSM_8  , ZPOSM_8  ;
 double XROTM_8  , YROTM_8  , ZROTM_8  ;

 double XPOSM_9  , YPOSM_9  , ZPOSM_9  ;
 double XROTM_9  , YROTM_9  , ZROTM_9  ;

 double XPOSM_10 , YPOSM_10 , ZPOSM_10 ;
 double XROTM_10 , YROTM_10 , ZROTM_10 ;

 double XPOSM_11 , YPOSM_11 , ZPOSM_11 ;
 double XROTM_11 , YROTM_11 , ZROTM_11 ;

 double XPOSM_12 , YPOSM_12 , ZPOSM_12 ;
 double XROTM_12 , YROTM_12 , ZROTM_12 ;

 double XPOSM_13 , YPOSM_13 , ZPOSM_13 ;
 double XROTM_13 , YROTM_13 , ZROTM_13 ;

 double XPOSM_14 , YPOSM_14 , ZPOSM_14 ;
 double XROTM_14 , YROTM_14 , ZROTM_14 ;

 double XPOSM_15 , YPOSM_15 , ZPOSM_15 ;
 double XROTM_15 , YROTM_15 , ZROTM_15 ;

 double XPOSM_16 , YPOSM_16 , ZPOSM_16 ;
 double XROTM_16 , YROTM_16 , ZROTM_16 ;

 double XPOSM_17 , YPOSM_17 , ZPOSM_17 ;
 double XROTM_17 , YROTM_17 , ZROTM_17 ;

 double XPOSM_18 , YPOSM_18 , ZPOSM_18 ;
 double XROTM_18 , YROTM_18 , ZROTM_18 ;

 double XPOSM_19 , YPOSM_19 , ZPOSM_19 ;
 double XROTM_19 , YROTM_19 , ZROTM_19 ;

 double XPOSM_20 , YPOSM_20 , ZPOSM_20 ;
 double XROTM_20 , YROTM_20 , ZROTM_20 ;




%}

INITIALIZE
%{

//#include "mono_pos"

 XPOSM_0   =  -0.24913305,      XROTM_0   =  -2.38732409;
 YPOSM_0   =  -0.0833092257,      YROTM_0   =   60.0380249;
 ZPOSM_0   =   2.18267322,      ZROTM_0   =   0.;

 XPOSM_1   =  -0.24934946,      XROTM_1   =   0.;
 YPOSM_1   =   0.,      YROTM_1   =   60.0380249;
 ZPOSM_1   =   2.18439531,      ZROTM_1   =   0.;

 XPOSM_2   =  -0.24913305,      XROTM_2   =   2.38732409;
 YPOSM_2   =   0.0833092257,      YROTM_2   =   60.0380249;
 ZPOSM_2   =   2.18267322,      ZROTM_2   =   0.;

 XPOSM_3   =  -0.166329354,      XROTM_3   =  -2.38732409;
 YPOSM_3   =  -0.0833092257,      YROTM_3   =   62.4253502;
 ZPOSM_3   =   2.19132972,      ZROTM_3   =   0.;

 XPOSM_4   =  -0.166473836,      XROTM_4   =   0.;
 YPOSM_4   =   0.,      YROTM_4   =   62.4253502;
 ZPOSM_4   =   2.19305944,      ZROTM_4   =   0.;

 XPOSM_5   =  -0.166329354,      XROTM_5   =   2.38732409;
 YPOSM_5   =   0.0833092257,      YROTM_5   =   62.4253502;
 ZPOSM_5   =   2.19132972,      ZROTM_5   =   0.;

 XPOSM_6   =  -0.0832369179,      XROTM_6   =  -2.38732409;
 YPOSM_6   =  -0.0833092257,      YROTM_6   =   64.8126755;
 ZPOSM_6   =   2.19652987,      ZROTM_6   =   0.;

 XPOSM_7   =  -0.0833092257,      XROTM_7   =   0.;
 YPOSM_7   =   0.,      YROTM_7   =   64.8126755;
 ZPOSM_7   =   2.19826412,      ZROTM_7   =   0.;

 XPOSM_8   =  -0.0832369179,      XROTM_8   =   2.38732409;
 YPOSM_8   =   0.0833092257,      YROTM_8   =   64.8126755;
 ZPOSM_8   =   2.19652987,      ZROTM_8   =   0.;

 XPOSM_9   =   0.,      XROTM_9   =  -2.38732409;
 YPOSM_9   =  -0.0833092257,      YROTM_9   =   67.1999969;
 ZPOSM_9   =   2.19826412,      ZROTM_9   =   0.;

 XPOSM_10  =   0.,      XROTM_10  =   0.;
 YPOSM_10  =   0.,      YROTM_10  =   67.1999969;
 ZPOSM_10  =   2.20000005,      ZROTM_10  =   0.;

 XPOSM_11  =   0.,      XROTM_11  =   2.38732409;
 YPOSM_11  =   0.0833092257,      YROTM_11  =   67.1999969;
 ZPOSM_11  =   2.19826412,      ZROTM_11  =   0.;

 XPOSM_12  =   0.0832369179,      XROTM_12  =  -2.38732409;
 YPOSM_12  =  -0.0833092257,      YROTM_12  =   69.5873184;
 ZPOSM_12  =   2.19652987,      ZROTM_12  =   0.;

 XPOSM_13  =   0.0833092257,      XROTM_13  =   0.;
 YPOSM_13  =   0.,      YROTM_13  =   69.5873184;
 ZPOSM_13  =   2.19826412,      ZROTM_13  =   0.;

 XPOSM_14  =   0.0832369179,      XROTM_14  =   2.38732409;
 YPOSM_14  =   0.0833092257,      YROTM_14  =   69.5873184;
 ZPOSM_14  =   2.19652987,      ZROTM_14  =   0.;

 XPOSM_15  =   0.166329354,      XROTM_15  =  -2.38732409;
 YPOSM_15  =  -0.0833092257,      YROTM_15  =   71.9746475;
 ZPOSM_15  =   2.19132972,      ZROTM_15  =   0.;

 XPOSM_16  =   0.166473836,      XROTM_16  =   0.;
 YPOSM_16  =   0.,      YROTM_16  =   71.9746475;
 ZPOSM_16  =   2.19305944,      ZROTM_16  =   0.;

 XPOSM_17  =   0.166329354,      XROTM_17  =   2.38732409;
 YPOSM_17  =   0.0833092257,      YROTM_17  =   71.9746475;
 ZPOSM_17  =   2.19132972,      ZROTM_17  =   0.;

 XPOSM_18  =   0.24913305,      XROTM_18  =  -2.38732409;
 YPOSM_18  =  -0.0833092257,      YROTM_18  =   74.361969;
 ZPOSM_18  =   2.18267322,      ZROTM_18  =   0.;

 XPOSM_19  =   0.24934946,      XROTM_19  =   0.;
 YPOSM_19  =   0.,      YROTM_19  =   74.361969;
 ZPOSM_19  =   2.18439531,      ZROTM_19  =   0.;

 XPOSM_20  =   0.24913305,      XROTM_20  =   2.38732409;
 YPOSM_20  =   0.0833092257,      YROTM_20  =   74.361969;
 ZPOSM_20  =   2.18267322,      ZROTM_20  =   0.;



   OMM =  69.2;
   OMM2 = 69.2;
   Q2 = 1.8733688;
   MONO_Y = 0.0417;
   MONO_Z = 0.0417;

  ZMINM = -MONO_Z;
  ZMAXM =  MONO_Z;
  YMINM = -MONO_Y;
  YMAXM =  MONO_Y;
  MOSAICHM = 60.0;
  MOSAICVM = 60.0;
  R0M = 1.0;
  QMM = Q2;      

  TTM 	= 2.0 * OMM;
  TTM2	= 2.0 * OMM2;
  EN 	= 2.08;
  DEN 	= 0.24;
  LMIN 	= sqrt(81.81 / (EN + DEN) );
  LMAX 	= sqrt(81.81 / (EN - DEN) );
%}

TRACE
COMPONENT a1 = Arm() AT (0,0,0) ABSOLUTE

COMPONENT source = Source_flux(radius = 0.01, dist = 2.0,
xw=0.05, yh=0.05, E0=EN, dE=DEN, flux=8.0e+14)
AT (0, 0, 0) RELATIVE a1 ROTATED (0,0,0) RELATIVE a1

COMPONENT Slit1 = Slit
(xmin=-0.03, xmax= 0.03, ymin=-0.03, ymax=0.03)
AT (0, 0, 0.5) RELATIVE a1 ROTATED (0,0,0) RELATIVE a1

COMPONENT E0 = E_monitor
(xmin=-0.03, xmax=0.03, ymin=-0.03, ymax=0.03, Emin=1.8, Emax=2.3,
nchan=100, filename="e0")
AT (0,0,2.0) RELATIVE a1 ROTATED (0,0,0) RELATIVE a1

COMPONENT mono1 = Monochromator
(zmin=-0.03, zmax=0.03, ymin=-0.015, ymax=0.015 ,
mosaich=240.0, mosaicv=60.0, r0=1.0, Q=1.8733688)
AT (0,0,2.0) RELATIVE a1  ROTATED (0,OMM,0) RELATIVE a1

COMPONENT a2 = Arm()
AT (0,0,0) RELATIVE mono1
ROTATED (0,TTM,0) RELATIVE a1

COMPONENT E1 = E_monitor
(xmin=-0.03, xmax=0.03, ymin=-0.03, ymax=0.03, Emin=1.8, Emax=2.3,
nchan=100, filename="e1")
AT (0,0,0.1) RELATIVE a2 ROTATED (0,0,0) RELATIVE a2

//%include "mono_def"

 /***************************************************/
 /***    begin of monochromator definition        ***/
 /***                                             ***/

component Doppler_0   = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_0  ,YPOSM_0  ,ZPOSM_0  ) relative a2
   rotated (XROTM_0  ,YROTM_0  ,ZROTM_0  ) relative a2
component Doppler_1   = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_1  ,YPOSM_1  ,ZPOSM_1  ) relative a2
   rotated (XROTM_1  ,YROTM_1  ,ZROTM_1  ) relative a2
component Doppler_2   = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_2  ,YPOSM_2  ,ZPOSM_2  ) relative a2
   rotated (XROTM_2  ,YROTM_2  ,ZROTM_2  ) relative a2
component Doppler_3   = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_3  ,YPOSM_3  ,ZPOSM_3  ) relative a2
   rotated (XROTM_3  ,YROTM_3  ,ZROTM_3  ) relative a2
component Doppler_4   = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_4  ,YPOSM_4  ,ZPOSM_4  ) relative a2
   rotated (XROTM_4  ,YROTM_4  ,ZROTM_4  ) relative a2
component Doppler_5   = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_5  ,YPOSM_5  ,ZPOSM_5  ) relative a2
   rotated (XROTM_5  ,YROTM_5  ,ZROTM_5  ) relative a2
component Doppler_6   = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_6  ,YPOSM_6  ,ZPOSM_6  ) relative a2
   rotated (XROTM_6  ,YROTM_6  ,ZROTM_6  ) relative a2
component Doppler_7   = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_7  ,YPOSM_7  ,ZPOSM_7  ) relative a2
   rotated (XROTM_7  ,YROTM_7  ,ZROTM_7  ) relative a2
component Doppler_8   = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_8  ,YPOSM_8  ,ZPOSM_8  ) relative a2
   rotated (XROTM_8  ,YROTM_8  ,ZROTM_8  ) relative a2
component Doppler_9   = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_9  ,YPOSM_9  ,ZPOSM_9  ) relative a2
   rotated (XROTM_9  ,YROTM_9  ,ZROTM_9  ) relative a2
component Doppler_10  = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_10 ,YPOSM_10 ,ZPOSM_10 ) relative a2
   rotated (XROTM_10 ,YROTM_10 ,ZROTM_10 ) relative a2
component Doppler_11  = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_11 ,YPOSM_11 ,ZPOSM_11 ) relative a2
   rotated (XROTM_11 ,YROTM_11 ,ZROTM_11 ) relative a2
component Doppler_12  = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_12 ,YPOSM_12 ,ZPOSM_12 ) relative a2
   rotated (XROTM_12 ,YROTM_12 ,ZROTM_12 ) relative a2
component Doppler_13  = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_13 ,YPOSM_13 ,ZPOSM_13 ) relative a2
   rotated (XROTM_13 ,YROTM_13 ,ZROTM_13 ) relative a2
component Doppler_14  = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_14 ,YPOSM_14 ,ZPOSM_14 ) relative a2
   rotated (XROTM_14 ,YROTM_14 ,ZROTM_14 ) relative a2
component Doppler_15  = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_15 ,YPOSM_15 ,ZPOSM_15 ) relative a2
   rotated (XROTM_15 ,YROTM_15 ,ZROTM_15 ) relative a2
component Doppler_16  = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_16 ,YPOSM_16 ,ZPOSM_16 ) relative a2
   rotated (XROTM_16 ,YROTM_16 ,ZROTM_16 ) relative a2
component Doppler_17  = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_17 ,YPOSM_17 ,ZPOSM_17 ) relative a2
   rotated (XROTM_17 ,YROTM_17 ,ZROTM_17 ) relative a2
component Doppler_18  = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_18 ,YPOSM_18 ,ZPOSM_18 ) relative a2
   rotated (XROTM_18 ,YROTM_18 ,ZROTM_18 ) relative a2
component Doppler_19  = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_19 ,YPOSM_19 ,ZPOSM_19 ) relative a2
   rotated (XROTM_19 ,YROTM_19 ,ZROTM_19 ) relative a2
component Doppler_20  = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_20 ,YPOSM_20 ,ZPOSM_20 ) relative a2
   rotated (XROTM_20 ,YROTM_20 ,ZROTM_20 ) relative a2

component a3 = Arm() at (0,0,0) relative Doppler_10 
 rotated (0,TTM2,0) relative a2 

 /***      end of monochromator definition        ***/
 /***                                             ***/
 /***************************************************/



COMPONENT E2 = E_monitor
(xmin=-0.015, xmax=0.015, ymin=-0.015, ymax=0.015, Emin=1.8, Emax=2.3,
nchan=100, filename="e2")
AT (0,0,2.4) RELATIVE a3 ROTATED (0,0,0) RELATIVE a3

END
</PRE>
<PRE>
DEFINE INSTRUMENT focus90()

DECLARE
%{
  double TTM, TTM2;
  double EN, DEN, LMIN, LMAX;

  double ZMINM, ZMAXM, YMINM, YMAXM, MOSAICHM, MOSAICVM, R0M, QMM;

  double OMM, MONO_Y, MONO_Z;
  double OMM2, Q2;

//#include "mono_var"
 double XPOSM_0  , YPOSM_0  , ZPOSM_0  ;
 double XROTM_0  , YROTM_0  , ZROTM_0  ;

 double XPOSM_1  , YPOSM_1  , ZPOSM_1  ;
 double XROTM_1  , YROTM_1  , ZROTM_1  ;

 double XPOSM_2  , YPOSM_2  , ZPOSM_2  ;
 double XROTM_2  , YROTM_2  , ZROTM_2  ;

 double XPOSM_3  , YPOSM_3  , ZPOSM_3  ;
 double XROTM_3  , YROTM_3  , ZROTM_3  ;

 double XPOSM_4  , YPOSM_4  , ZPOSM_4  ;
 double XROTM_4  , YROTM_4  , ZROTM_4  ;

 double XPOSM_5  , YPOSM_5  , ZPOSM_5  ;
 double XROTM_5  , YROTM_5  , ZROTM_5  ;

 double XPOSM_6  , YPOSM_6  , ZPOSM_6  ;
 double XROTM_6  , YROTM_6  , ZROTM_6  ;

 double XPOSM_7  , YPOSM_7  , ZPOSM_7  ;
 double XROTM_7  , YROTM_7  , ZROTM_7  ;

 double XPOSM_8  , YPOSM_8  , ZPOSM_8  ;
 double XROTM_8  , YROTM_8  , ZROTM_8  ;

 double XPOSM_9  , YPOSM_9  , ZPOSM_9  ;
 double XROTM_9  , YROTM_9  , ZROTM_9  ;

 double XPOSM_10 , YPOSM_10 , ZPOSM_10 ;
 double XROTM_10 , YROTM_10 , ZROTM_10 ;

 double XPOSM_11 , YPOSM_11 , ZPOSM_11 ;
 double XROTM_11 , YROTM_11 , ZROTM_11 ;

 double XPOSM_12 , YPOSM_12 , ZPOSM_12 ;
 double XROTM_12 , YROTM_12 , ZROTM_12 ;

 double XPOSM_13 , YPOSM_13 , ZPOSM_13 ;
 double XROTM_13 , YROTM_13 , ZROTM_13 ;

 double XPOSM_14 , YPOSM_14 , ZPOSM_14 ;
 double XROTM_14 , YROTM_14 , ZROTM_14 ;

 double XPOSM_15 , YPOSM_15 , ZPOSM_15 ;
 double XROTM_15 , YROTM_15 , ZROTM_15 ;

 double XPOSM_16 , YPOSM_16 , ZPOSM_16 ;
 double XROTM_16 , YROTM_16 , ZROTM_16 ;

 double XPOSM_17 , YPOSM_17 , ZPOSM_17 ;
 double XROTM_17 , YROTM_17 , ZROTM_17 ;

 double XPOSM_18 , YPOSM_18 , ZPOSM_18 ;
 double XROTM_18 , YROTM_18 , ZROTM_18 ;

 double XPOSM_19 , YPOSM_19 , ZPOSM_19 ;
 double XROTM_19 , YROTM_19 , ZROTM_19 ;

 double XPOSM_20 , YPOSM_20 , ZPOSM_20 ;
 double XROTM_20 , YROTM_20 , ZROTM_20 ;


%}

INITIALIZE
%{

//#include "mono_pos"

 XPOSM_0   =  -0.24913305,      XROTM_0   =  -2.38732409;
 YPOSM_0   =  -0.0833092257,      YROTM_0   =   82.838028;
 ZPOSM_0   =   2.18267322,      ZROTM_0   =   0.;

 XPOSM_1   =  -0.24934946,      XROTM_1   =   0.;
 YPOSM_1   =   0.,      YROTM_1   =   82.838028;
 ZPOSM_1   =   2.18439531,      ZROTM_1   =   0.;

 XPOSM_2   =  -0.24913305,      XROTM_2   =   2.38732409;
 YPOSM_2   =   0.0833092257,      YROTM_2   =   82.838028;
 ZPOSM_2   =   2.18267322,      ZROTM_2   =   0.;

 XPOSM_3   =  -0.166329354,      XROTM_3   =  -2.38732409;
 YPOSM_3   =  -0.0833092257,      YROTM_3   =   85.2253494;
 ZPOSM_3   =   2.19132972,      ZROTM_3   =   0.;

 XPOSM_4   =  -0.166473836,      XROTM_4   =   0.;
 YPOSM_4   =   0.,      YROTM_4   =   85.2253494;
 ZPOSM_4   =   2.19305944,      ZROTM_4   =   0.;

 XPOSM_5   =  -0.166329354,      XROTM_5   =   2.38732409;
 YPOSM_5   =   0.0833092257,      YROTM_5   =   85.2253494;
 ZPOSM_5   =   2.19132972,      ZROTM_5   =   0.;

 XPOSM_6   =  -0.0832369179,      XROTM_6   =  -2.38732409;
 YPOSM_6   =  -0.0833092257,      YROTM_6   =   87.6126785;
 ZPOSM_6   =   2.19652987,      ZROTM_6   =   0.;

 XPOSM_7   =  -0.0833092257,      XROTM_7   =   0.;
 YPOSM_7   =   0.,      YROTM_7   =   87.6126785;
 ZPOSM_7   =   2.19826412,      ZROTM_7   =   0.;

 XPOSM_8   =  -0.0832369179,      XROTM_8   =   2.38732409;
 YPOSM_8   =   0.0833092257,      YROTM_8   =   87.6126785;
 ZPOSM_8   =   2.19652987,      ZROTM_8   =   0.;

 XPOSM_9   =   0.,      XROTM_9   =  -2.38732409;
 YPOSM_9   =  -0.0833092257,      YROTM_9   =   90.;
 ZPOSM_9   =   2.19826412,      ZROTM_9   =   0.;

 XPOSM_10  =   0.,      XROTM_10  =   0.;
 YPOSM_10  =   0.,      YROTM_10  =   90.;
 ZPOSM_10  =   2.20000005,      ZROTM_10  =   0.;

 XPOSM_11  =   0.,      XROTM_11  =   2.38732409;
 YPOSM_11  =   0.0833092257,      YROTM_11  =   90.;
 ZPOSM_11  =   2.19826412,      ZROTM_11  =   0.;

 XPOSM_12  =   0.0832369179,      XROTM_12  =  -2.38732409;
 YPOSM_12  =  -0.0833092257,      YROTM_12  =   92.3873215;
 ZPOSM_12  =   2.19652987,      ZROTM_12  =   0.;

 XPOSM_13  =   0.0833092257,      XROTM_13  =   0.;
 YPOSM_13  =   0.,      YROTM_13  =   92.3873215;
 ZPOSM_13  =   2.19826412,      ZROTM_13  =   0.;

 XPOSM_14  =   0.0832369179,      XROTM_14  =   2.38732409;
 YPOSM_14  =   0.0833092257,      YROTM_14  =   92.3873215;
 ZPOSM_14  =   2.19652987,      ZROTM_14  =   0.;

 XPOSM_15  =   0.166329354,      XROTM_15  =  -2.38732409;
 YPOSM_15  =  -0.0833092257,      YROTM_15  =   94.7746506;
 ZPOSM_15  =   2.19132972,      ZROTM_15  =   0.;

 XPOSM_16  =   0.166473836,      XROTM_16  =   0.;
 YPOSM_16  =   0.,      YROTM_16  =   94.7746506;
 ZPOSM_16  =   2.19305944,      ZROTM_16  =   0.;

 XPOSM_17  =   0.166329354,      XROTM_17  =   2.38732409;
 YPOSM_17  =   0.0833092257,      YROTM_17  =   94.7746506;
 ZPOSM_17  =   2.19132972,      ZROTM_17  =   0.;

 XPOSM_18  =   0.24913305,      XROTM_18  =  -2.38732409;
 YPOSM_18  =  -0.0833092257,      YROTM_18  =   97.161972;
 ZPOSM_18  =   2.18267322,      ZROTM_18  =   0.;

 XPOSM_19  =   0.24934946,      XROTM_19  =   0.;
 YPOSM_19  =   0.,      YROTM_19  =   97.161972;
 ZPOSM_19  =   2.18439531,      ZROTM_19  =   0.;

 XPOSM_20  =   0.24913305,      XROTM_20  =   2.38732409;
 YPOSM_20  =   0.0833092257,      YROTM_20  =   97.161972;
 ZPOSM_20  =   2.18267322,      ZROTM_20  =   0.;

   OMM =  69.2;
   OMM2 = 90.0;
   Q2 = 2.004;
   MONO_Y = 0.0417;
   MONO_Z = 0.0417;

  ZMINM = -MONO_Z;
  ZMAXM =  MONO_Z;
  YMINM = -MONO_Y;
  YMAXM =  MONO_Y;
  MOSAICHM = 60.0;
  MOSAICVM = 60.0;
  R0M = 1.0;
  QMM = Q2;      

  TTM 	= 2.0 * OMM;
  TTM2	= 2.0 * OMM2;
  EN 	= 2.08;
  DEN 	= 0.24;
  LMIN 	= sqrt(81.81 / (EN + DEN) );
  LMAX 	= sqrt(81.81 / (EN - DEN) );
%}

TRACE
COMPONENT a1 = Arm() AT (0,0,0) ABSOLUTE

COMPONENT source = Source_flux(radius = 0.01, dist = 2.0,
xw=0.05, yh=0.05, E0=EN, dE=DEN, flux=8.0e+14)
AT (0, 0, 0) RELATIVE a1 ROTATED (0,0,0) RELATIVE a1

COMPONENT Slit1 = Slit
(xmin=-0.03, xmax= 0.03, ymin=-0.03, ymax=0.03)
AT (0, 0, 0.5) RELATIVE a1 ROTATED (0,0,0) RELATIVE a1

COMPONENT E0 = E_monitor
(xmin=-0.03, xmax=0.03, ymin=-0.03, ymax=0.03, Emin=1.8, Emax=2.3,
nchan=100, filename="e0")
AT (0,0,2.0) RELATIVE a1 ROTATED (0,0,0) RELATIVE a1

COMPONENT mono1 = Monochromator
(zmin=-0.03, zmax=0.03, ymin=-0.015, ymax=0.015 ,
mosaich=240.0, mosaicv=60.0, r0=1.0, Q=1.8733688)
AT (0,0,2.0) RELATIVE a1  ROTATED (0,OMM,0) RELATIVE a1

COMPONENT a2 = Arm()
AT (0,0,0) RELATIVE mono1
ROTATED (0,TTM,0) RELATIVE a1

COMPONENT E1 = E_monitor
(xmin=-0.03, xmax=0.03, ymin=-0.03, ymax=0.03, Emin=1.8, Emax=2.3,
nchan=100, filename="e1")
AT (0,0,0.1) RELATIVE a2 ROTATED (0,0,0) RELATIVE a2

//%include "mono_def"

 /***************************************************/
 /***    begin of monochromator definition        ***/
 /***                                             ***/

component Doppler_0   = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_0  ,YPOSM_0  ,ZPOSM_0  ) relative a2
   rotated (XROTM_0  ,YROTM_0  ,ZROTM_0  ) relative a2
component Doppler_1   = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_1  ,YPOSM_1  ,ZPOSM_1  ) relative a2
   rotated (XROTM_1  ,YROTM_1  ,ZROTM_1  ) relative a2
component Doppler_2   = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_2  ,YPOSM_2  ,ZPOSM_2  ) relative a2
   rotated (XROTM_2  ,YROTM_2  ,ZROTM_2  ) relative a2
component Doppler_3   = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_3  ,YPOSM_3  ,ZPOSM_3  ) relative a2
   rotated (XROTM_3  ,YROTM_3  ,ZROTM_3  ) relative a2
component Doppler_4   = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_4  ,YPOSM_4  ,ZPOSM_4  ) relative a2
   rotated (XROTM_4  ,YROTM_4  ,ZROTM_4  ) relative a2
component Doppler_5   = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_5  ,YPOSM_5  ,ZPOSM_5  ) relative a2
   rotated (XROTM_5  ,YROTM_5  ,ZROTM_5  ) relative a2
component Doppler_6   = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_6  ,YPOSM_6  ,ZPOSM_6  ) relative a2
   rotated (XROTM_6  ,YROTM_6  ,ZROTM_6  ) relative a2
component Doppler_7   = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_7  ,YPOSM_7  ,ZPOSM_7  ) relative a2
   rotated (XROTM_7  ,YROTM_7  ,ZROTM_7  ) relative a2
component Doppler_8   = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_8  ,YPOSM_8  ,ZPOSM_8  ) relative a2
   rotated (XROTM_8  ,YROTM_8  ,ZROTM_8  ) relative a2
component Doppler_9   = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_9  ,YPOSM_9  ,ZPOSM_9  ) relative a2
   rotated (XROTM_9  ,YROTM_9  ,ZROTM_9  ) relative a2
component Doppler_10  = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_10 ,YPOSM_10 ,ZPOSM_10 ) relative a2
   rotated (XROTM_10 ,YROTM_10 ,ZROTM_10 ) relative a2
component Doppler_11  = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_11 ,YPOSM_11 ,ZPOSM_11 ) relative a2
   rotated (XROTM_11 ,YROTM_11 ,ZROTM_11 ) relative a2
component Doppler_12  = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_12 ,YPOSM_12 ,ZPOSM_12 ) relative a2
   rotated (XROTM_12 ,YROTM_12 ,ZROTM_12 ) relative a2
component Doppler_13  = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_13 ,YPOSM_13 ,ZPOSM_13 ) relative a2
   rotated (XROTM_13 ,YROTM_13 ,ZROTM_13 ) relative a2
component Doppler_14  = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_14 ,YPOSM_14 ,ZPOSM_14 ) relative a2
   rotated (XROTM_14 ,YROTM_14 ,ZROTM_14 ) relative a2
component Doppler_15  = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_15 ,YPOSM_15 ,ZPOSM_15 ) relative a2
   rotated (XROTM_15 ,YROTM_15 ,ZROTM_15 ) relative a2
component Doppler_16  = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_16 ,YPOSM_16 ,ZPOSM_16 ) relative a2
   rotated (XROTM_16 ,YROTM_16 ,ZROTM_16 ) relative a2
component Doppler_17  = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_17 ,YPOSM_17 ,ZPOSM_17 ) relative a2
   rotated (XROTM_17 ,YROTM_17 ,ZROTM_17 ) relative a2
component Doppler_18  = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_18 ,YPOSM_18 ,ZPOSM_18 ) relative a2
   rotated (XROTM_18 ,YROTM_18 ,ZROTM_18 ) relative a2
component Doppler_19  = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_19 ,YPOSM_19 ,ZPOSM_19 ) relative a2
   rotated (XROTM_19 ,YROTM_19 ,ZROTM_19 ) relative a2
component Doppler_20  = Monochromator(zmin=ZMINM,   zmax=ZMAXM, ymin=YMINM, ymax=YMAXM, mosaich=MOSAICHM, mosaicv=MOSAICVM, r0=R0M, Q=QMM)
 at (XPOSM_20 ,YPOSM_20 ,ZPOSM_20 ) relative a2
   rotated (XROTM_20 ,YROTM_20 ,ZROTM_20 ) relative a2

component a3 = Arm() at (0,0,0) relative Doppler_10 
 rotated (0,TTM2,0) relative a2 

 /***      end of monochromator definition        ***/
 /***                                             ***/
 /***************************************************/



COMPONENT E2 = E_monitor
(xmin=-0.015, xmax=0.015, ymin=-0.015, ymax=0.015, Emin=1.8, Emax=2.3,
nchan=100, filename="e2")
AT (0,0,2.4) RELATIVE a3 ROTATED (0,0,0) RELATIVE a3

END
</PRE>
<PRE>
begin:          vcard
fn:             Dr. Oliver Kirstein
n:              Kirstein;Dr. Oliver
org:            Forschungszentrum Juelich GmbH
adr:            Forschungszentrum Juelich GmbH;;Institut fuer Festkoerperforschung;Juelich;NRW;D-52425;Germany
email;internet: o.kirstein@fz-juelich.de
title:          Neutronenstreuung
tel;work:       +49 (0)2461 614532
tel;fax:        +49 (0)2461 612610
x-mozilla-cpt:  ;0
x-mozilla-html: TRUE
version:        2.1
end:            vcard

</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00005" HREF="msg00005.html">Re: Questions</A></STRONG>
<UL><LI><EM>From:</EM> Kristian Nielsen &lt;kristian.nielsen@risoe.dk&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>

<LI>Next by Date:
<STRONG><A HREF="msg00005.html">Re: Questions</A></STRONG>
</LI>

<li>Index(es):
<ul>
<li><a href="index.html#00004"><strong>Chronological</Strong></a></li>
<li><a href="threads.html#00004"><strong>Thread</strong></a></li>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
