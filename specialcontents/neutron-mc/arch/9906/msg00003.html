<P><strong><blink>This archive web page is obsolete!</blink></strong> 
<P>Please refer to the new <a href="/pipermail/neutron-mc">mailman<a> archive!


<!-- MHonArc v2.1.0 -->
<!--X-Subject: Re: flux&#45;sources -->
<!--X-From: Kristian Nielsen <kristian.nielsen@risoe.dk> -->
<!--X-Date: Fri, 18 Jun 1999 13:24:53 +0200 -->
<!--X-Message-Id: 01JCJPKXZQ7C94NTAD@risoe.dk -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 3767BA33.8DF5FABF@ph.tum.de -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: flux-sources</title>
<link rev="made" href="mailto:kristian.nielsen@risoe.dk">
</head>
<body bgcolor="white">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<A HREF="msg00002.html">Date Prev</A>][<A HREF="msg00012.html">Date Next</A>]
<a href="index.html#00003">[Chronological]</a>
<a href="threads.html#00003">[Thread]</a>
<a href="/cgi-bin/wilma/neutron-mc">[Top]</a>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>Re: flux-sources</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><strong>To</strong>: <strong><A HREF="mailto:Daniel_Berger@Physik.TU-Muenchen.DE">Daniel_Berger@Physik.TU-Muenchen.DE</A></strong></LI>
<LI><strong>Subject</strong>: <strong>Re: flux-sources</strong></LI>
<LI><strong>From</strong>: <strong>Kristian Nielsen &lt;<A HREF="mailto:kristian.nielsen@risoe.dk">kristian.nielsen@risoe.dk</A>&gt;</strong></LI>
<LI>Date: Fri, 18 Jun 1999 13:24:53 +0200</LI>
<LI>Cc: <A HREF="mailto:neutron-mc@risoe.dk">neutron-mc@risoe.dk</A></LI>
<LI>Date-warning: Date header was inserted by risoe.dk</LI>
<LI>In-reply-to: &lt;3767BA33.8DF5FABF@ph.tum.de&gt;(message from Daniel Berger on Wed, 16 Jun 1999 16:52:36 +0200)</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
&gt; Date: Wed, 16 Jun 1999 16:52:36 +0200
&gt; From: Daniel Berger &lt;Daniel_Berger@Physik.TU-Muenchen.DE&gt;

&gt; I have some problems to understand Source_flux.
&gt; How does the programme calculate d_Phi/d_Lambda*d_Omega and how is d_Omega
&gt; calculated? A further question is the influx of the source_area to d_Omega.

The basic idea in the Source_flux component is to start off
mcget_ncount() neutron histories within a given wavelength range and
solid angle. The initial neutron weight is then calculated so that the
simulated intensity matches a given desired flux (neutrons per lambda
per solid angle per source area).

The solid angle (I think this is what you refer to with d_Omega?) is
defined by a rectangle of size xw x yh at distance dist, so the maximum
horizontal and vertical divergence may be computed as

  hdiv = atan(xw/(2.0*dist))
  vdiv = atan(yh/(2.0*dist))

The solid angle within which neutron histories are emitted is therefore
(4*hdiv*vdiv) (this implicitly makes approximations based on the
assumptions that the angles are small and that the source dimensions are
small compared to the distance dist. These approximation should probably
be removed in a later version).

The wavelength range delta_lambda of emitted neutron histories is easily
computed from E0 and dE, as is the area of the source source_area from
the source radius.

Now the number of neutron histories per solid angle per wavelength per
source area emitted in the simulation is

  F = mcget_ncount()/((4*hdiv*vdiv)*delta_lambda*source_area

The simulated intensity in the simulation is p_in*F, where p_in is the
initial weight of the neutron. Thus, to make the simulated intensity
match a given flux, we should have

  p_in = flux/F

This is what happens in the Source_flux component.

I hope this answers your questions, otherwise feel free to ask again
about details.

 - Kristian.


</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00011" HREF="msg00011.html">Soller_trans.comp</A></STRONG>
<UL><LI><EM>From:</EM> "Dr. Georg Artus" &lt;Georg_Artus@Physik.TU-Muenchen.DE&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<LI>Prev by Date:
<STRONG><A HREF="msg00002.html">Re: flux-sources</A></STRONG>
</LI>

<LI>Next by Date:
<STRONG><A HREF="msg00012.html">Vanadium Sample</A></STRONG>
</LI>

<li>Index(es):
<ul>
<li><a href="index.html#00003"><strong>Chronological</Strong></a></li>
<li><a href="threads.html#00003"><strong>Thread</strong></a></li>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
