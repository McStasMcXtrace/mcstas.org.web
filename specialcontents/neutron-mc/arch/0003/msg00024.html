<P><strong><blink>This archive web page is obsolete!</blink></strong> 
<P>Please refer to the new <a href="/pipermail/neutron-mc">mailman<a> archive!


<!-- MHonArc v2.1.0 -->
<!--X-Subject: Re: Position and targeting -->
<!--X-From: Kristian Nielsen <kristian.nielsen@risoe.dk> -->
<!--X-Date: 28 Mar 2000 12:06:10 +0200 -->
<!--X-Message-Id:  -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 38E06590.7328958C@ill.fr -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: Position and targeting</title>
<link rev="made" href="mailto:kristian.nielsen@risoe.dk">
</head>
<body bgcolor="white">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<A HREF="msg00028.html">Date Prev</A>][<A HREF="msg00025.html">Date Next</A>]
<a href="index.html#00024">[Chronological]</a>
<a href="threads.html#00024">[Thread]</a>
<a href="/cgi-bin/wilma/neutron-mc">[Top]</a>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>Re: Position and targeting</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><strong>To</strong>: <strong><A HREF="mailto:farhi@ill.fr">farhi@ill.fr</A></strong></LI>
<LI><strong>Subject</strong>: <strong>Re: Position and targeting</strong></LI>
<LI><strong>From</strong>: <strong>Kristian Nielsen &lt;<A HREF="mailto:kristian.nielsen@risoe.dk">kristian.nielsen@risoe.dk</A>&gt;</strong></LI>
<LI>Date: 28 Mar 2000 12:06:10 +0200</LI>
<LI>In-reply-to: &lt;38E06590.7328958C@ill.fr&gt; (message from Farhi on Tue, 28 Mar2000 09:56:00 +0200)</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
&gt; Date: Tue, 28 Mar 2000 09:56:00 +0200
&gt; From: Farhi &lt;farhi@ill.fr&gt;

&gt; I'm designing a general source for McStas, with option string such as
&gt; for the Monitor_nD (enabling many cross-options and extended
&gt; customization). For this, a possible option for source (and usefull !)
&gt; is to target to a specified component. For this, I need to get the
&gt; distance from the source to the next component. This is stored into the
&gt; 'mcposa*' structures, but these are defined AFTER the initialization of
&gt; all components. In order to be able to use these informations during
&gt; init of components, would it be possible to move the /* Computation of
&gt; coordinate transformations. */ at the begining of the mcinit function ?
&gt; Then with a
&gt; #define MC_GETPOS(comp) (mcrota ## comp )
&gt; it would be possible to access all component positions during init of
&gt; components...

Yes, I have intended to implement something like this for a long
time. It is clearly needed for components to be able to ask for the
position of other components like you suggest. There was some
complitation (can't remember what just now), but it should clearly be
possible. I will try go get it done for the next release in May (or
sooner, if it turns out to be very simple).

I am also thinking that it would be useful to support the "option style"
that you have used so successfully in a better way in the McStas core?
Either through extended syntax, or with some library calls for
components.

Another thing: Did you notice that the McDoc documentation on the Risø Web
pages for your Flux_adapter is messed up? The reason seems to be that
the automatic script downloads an old version of the file. In fact, I
just tried to download the Flux_adapter.comp source from

    <A HREF="http://www.ill.fr/tas/mcstas/src/sources/Flux_adapter.comp">http://www.ill.fr/tas/mcstas/src/sources/Flux_adapter.comp</A>

and that is indeed an old version without McDoc tags. Any idea what
might be wrong?

 - Kristian.




</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<LI>Prev by Date:
<STRONG><A HREF="msg00028.html">component location</A></STRONG>
</LI>

<LI>Next by Date:
<STRONG><A HREF="msg00025.html">Thanks  for  your  program , and I  need  a  help</A></STRONG>
</LI>

<li>Index(es):
<ul>
<li><a href="index.html#00024"><strong>Chronological</Strong></a></li>
<li><a href="threads.html#00024"><strong>Thread</strong></a></li>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
